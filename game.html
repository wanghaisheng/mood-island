<html><head><base href="/" target="_blank"><style>
:root {
  --happy-color: #FFD700;
  --relax-color: #87CEEB;
  --sad-color: #4682B4;
  --anxiety-color: #483D8B;
}

body {
  margin: 0;
  padding: 20px;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  color: white;
  min-height: 100vh;
}

.game-container {
  max-width: 800px;
  margin: 0 auto;
}

/* Add new styles for steps display */
.step-container {
  display: none;
  animation: fadeIn 0.5s ease;
}

.step-container.active {
  display: block;
}

.step-indicator {
  display: flex;
  justify-content: center;
  margin-bottom: 30px;
  gap: 10px;
}

.step-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

.step-dot.active {
  background: white;
  transform: scale(1.2);
}

.step-title {
  text-align: center;
  margin-bottom: 30px;
  font-size: 24px;
  color: #fff;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.back-button {
  position: fixed;
  top: 20px;
  left: 20px;
  padding: 10px 20px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 8px;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 100;
}

.back-button:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
}

/* Remove navigation buttons styles */
.navigation-buttons {
  display: none;
}

.weather-selector {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
  margin: 20px 0;
}

.weather-option {
  background: rgba(255, 255, 255, 0.1);
  padding: 20px;
  border-radius: 15px;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: center;
  border: 2px solid transparent;
}

.weather-option:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  border-color: white;
}

.weather-option[data-island="happy"] {
  border-color: var(--happy-color);
}

.weather-option[data-island="relax"] {
  border-color: var(--relax-color);
}

.weather-option[data-island="sad"] {
  border-color: var(--sad-color);
}

.weather-option[data-island="anxiety"] {
  border-color: var(--anxiety-color);
}

.island-container {
  display: none;
  padding: 20px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  margin-top: 20px;
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.egg-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-top: 20px;
}

.egg {
  width: 100px;
  height: 120px;
  margin: auto;
  cursor: pointer;
  position: relative;
  transition: transform 0.3s ease;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url('https://raw.githubusercontent.com/iwenli/eggFrenzy/master/public/images/egg0.png');
}

.egg.opened {
  transform: scale(0.9);
  background-image: url('https://raw.githubusercontent.com/iwenli/eggFrenzy/master/public/images/egg4.png');
}

/* Remove the egg-svg styles since we won't use SVG anymore */
.egg-svg {
  display: none;
}

.gem-collection {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 20px;
}

.gem {
  width: 30px;
  height: 30px;
  opacity: 0.3;
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.gem.collected {
  opacity: 1;
  animation: gemCollected 0.5s ease;
}

@keyframes gemCollected {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.95);
  padding: 30px;
  border-radius: 15px;
  z-index: 1000;
  max-width: 500px;
  width: 90%;
  box-shadow: 0 0 20px rgba(255,255,255,0.1);
}

.modal-content {
  color: white;
  text-align: center;
}

.close-modal {
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  color: white;
  font-size: 24px;
  transition: transform 0.3s ease;
}

.close-modal:hover {
  transform: rotate(90deg);
}

.answer-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  padding: 12px 24px;
  margin: 10px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 16px;
}

.answer-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

#happy-messages, #relax-tips {
  margin-top: 20px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
}

#happy-messages p, #relax-tips p {
  margin: 10px 0;
  padding: 10px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 5px;
  animation: messageAppear 0.5s ease;
}

@keyframes messageAppear {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.reward {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  opacity: 0;
  pointer-events: none;
}

.reward.falling {
  animation: fall 1s ease-out forwards;
}

@keyframes fall {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, 100px);
  }
}

.egg-particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.particle {
  position: absolute;
  background: goldenrod;
  width: 4px;
  height: 4px;
  border-radius: 50%;
}

.celebration {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1000;
}

.progress-bar {
  width: 100%;
  height: 10px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 5px;
  margin: 20px 0;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #4CAF50, #8BC34A);
  width: 0%;
  transition: width 0.5s ease;
}

.achievement {
  display: inline-block;
  padding: 10px 20px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  margin: 5px;
  opacity: 0.5;
  transition: all 0.3s ease;
}

.achievement.unlocked {
  opacity: 1;
  background: rgba(76, 175, 80, 0.2);
  animation: achievementUnlock 0.5s ease;
}

@keyframes achievementUnlock {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.completion-reward {
  text-align: center;
  margin-top: 20px;
  padding: 20px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  display: none;
}

.reward-icon {
  font-size: 40px;
  margin: 10px;
  animation: float 2s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

/* Add styles for the badge display area */
.badge-collection {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 20px 0;
  padding: 15px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
}

.badge {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  opacity: 0.5;
  transition: all 0.3s ease;
}

.badge.unlocked {
  opacity: 1;
  background: rgba(255, 255, 255, 0.2);
  animation: badgeUnlock 0.5s ease;
}

@keyframes badgeUnlock {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

.badge-icon {
  font-size: 1.2em;
}

.badge-name {
  font-size: 0.9em;
}

/* Add new styles for happy island */
#happy-island {
  text-align: center;
  padding: 20px;
  background: linear-gradient(135deg, #FF6B6B, #FF8E8E);
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.checkin-wall {
  background: linear-gradient(45deg, #FFE5D9, #FFF1E6);
  border-radius: 12px;
  padding: 20px;
  margin: 20px 0;
  min-height: 300px;
  box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
  position: relative;
  overflow: hidden;
}

.checkin-wall::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    45deg,
    rgba(255,255,255,0.1),
    rgba(255,255,255,0.1) 10px,
    rgba(255,255,255,0.2) 10px,
    rgba(255,255,255,0.2) 20px
  );
}

.checkin-title {
  color: #FF6B6B;
  font-size: 24px;
  margin-bottom: 20px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
}

#checkin-btn {
  background: linear-gradient(45deg, #4CAF50, #45B649);
  color: white;
  padding: 12px 30px;
  border: none;
  border-radius: 25px;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

#checkin-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.checkin-entry {
  background: white;
  padding: 10px 20px;
  border-radius: 20px;
  margin: 10px;
  display: inline-block;
  color: #333;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  animation: entryAppear 0.5s ease-out;
}

@keyframes entryAppear {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.share-message {
  color: white;
  font-size: 18px;
  margin: 20px 0;
  padding: 15px;
  background: rgba(255,255,255,0.2);
  border-radius: 10px;
  display: none;
}

/* Add these new animation styles to the existing CSS */
.intro-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 20px;
  transition: opacity 1s ease;
}

.intro-title {
  font-size: 32px;
  color: #fff;
  margin-bottom: 30px;
  opacity: 0;
  transform: translateY(30px);
  animation: slideUp 1s ease forwards;
}

.intro-text {
  font-size: 18px;
  color: #fff;
  max-width: 800px;
  line-height: 1.6;
  opacity: 0;
  transform: translateY(30px);
  animation: slideUp 1s ease forwards 0.5s;
}

.emotion-compass {
  width: 200px;
  height: 200px;
  position: relative;
  margin: 40px auto;
  opacity: 0;
  animation: fadeIn 1s ease forwards 1.5s;
}

.compass-circle {
  width: 100%;
  height: 100%;
  border: 3px solid rgba(255,255,255,0.2);
  border-radius: 50%;
  position: absolute;
  animation: rotate 10s linear infinite;
}

.emotion-symbol {
  position: absolute;
  font-size: 24px;
  transform-origin: center;
}

.start-journey {
  margin-top: 30px;
  padding: 15px 30px;
  font-size: 18px;
  background: linear-gradient(45deg, #4CAF50, #45B649);
  border: none;
  border-radius: 25px;
  color: white;
  cursor: pointer;
  opacity: 0;
  transform: translateY(30px);
  animation: slideUp 1s ease forwards 2s;
  transition: all 0.3s ease;
}

.start-journey:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

@keyframes slideUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes shake {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-5deg); }
  75% { transform: rotate(5deg); }
}

.piggy-bank {
  cursor: pointer;
  margin: 20px auto;
  width: 150px;
  transition: transform 0.3s ease;
}

.piggy-bank:hover {
  transform: scale(1.1);
}
</style></head><body>
<div class="game-container" style="display: none;">
  <button class="back-button" id="backBtn" style="display: none;">è¿”å›</button>
  
  <div class="step-indicator">
    <div class="step-dot active" data-step="1"></div>
    <div class="step-dot" data-step="2"></div>
    <div class="step-dot" data-step="3"></div>
  </div>

  <!-- Step 1: Weather Selection -->
  <div class="step-container active" id="step1">
    <h2 class="step-title">é€‰æ‹©ä»Šå¤©çš„å¿ƒæƒ…å¤©æ°”</h2>
    <div class="weather-selector">
      <div class="weather-option" data-island="happy">
        <h2>æ™´å¤© ğŸŒ</h2>
        <p>å¿ƒæƒ…æ„‰æ‚¦ï¼Œè¿›å…¥å¿«ä¹å²›</p>
      </div>
      <div class="weather-option" data-island="relax">
        <h2>å¤šäº‘ â›…</h2>
        <p>éœ€è¦æ”¾æ¾ï¼Œè¿›å…¥æ”¾æ¾å²›</p>
      </div>
      <div class="weather-option" data-island="sad">
        <h2>é˜´å¤© ğŸŒ§ï¸</h2>
        <p>æƒ…ç»ªä½è°·ï¼Œè¿›å…¥æ‚²ä¼¤å²›</p>
      </div>
      <div class="weather-option" data-island="anxiety">
        <h2>æš´é£é›¨ ğŸŒªï¸</h2>
        <p>ç„¦è™‘æ»¡æ»¡ï¼Œè¿›å…¥ç„¦è™‘å²›</p>
      </div>
    </div>
  </div>

  <!-- Step 2: Island Introduction -->
  <div class="step-container" id="step2">
    <h2 class="step-title">æ¬¢è¿æ¥åˆ°<span class="island-name"></span></h2>
    <div class="island-intro">
      <!-- Dynamic content will be inserted here -->
    </div>
  </div>

  <!-- Step 3: Island Activities -->
  <div class="step-container" id="step3">
    <h2 class="step-title"><span class="island-name"></span>æ¢ç´¢</h2>
    <div class="island-content"></div>
  </div>
</div>

<div class="modal" id="question-modal">
  <span class="close-modal">&times;</span>
  <div class="modal-content">
    <h3 id="question-text"></h3>
    <button class="answer-btn" data-answer="A"></button>
    <button class="answer-btn" data-answer="B"></button>
  </div>
</div>

<script>
const sadQuestions = [
  {
    question: "ä»Šå¤©ä½ æœ‰è¿›è¡Œé”»ç‚¼å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘åšäº†ä¸€äº›è¿åŠ¨",
      B: "æ²¡æœ‰ï¼Œä¸€ç›´å‘†åœ¨åŸåœ°" 
    },
    feedback: {
      A: "å¤ªæ£’äº†ï¼è¿åŠ¨èƒ½å¸®åŠ©æˆ‘ä»¬é‡Šæ”¾å‹åŠ›ï¼Œäº§ç”Ÿå¿«ä¹æ¿€ç´ ",
      B: "è¯•ç€ä»ç®€å•çš„æ•£æ­¥å¼€å§‹ï¼Œæ…¢æ…¢åŸ¹å…»è¿åŠ¨ä¹ æƒ¯å§"
    },
    badge: "ğŸƒ è¿åŠ¨è¾¾äºº"
  },
  {
    question: "ä»Šå¤©ä½ å‡ºé—¨èµ°åŠ¨äº†å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘å‡ºå»é€äº†é€æ°”",
      B: "æ²¡æœ‰ï¼Œä¸€ç›´å¾…åœ¨å®¶é‡Œ"
    },
    feedback: {
      A: "å‘¼å¸æ–°é²œç©ºæ°”å¯¹å¿ƒæƒ…æœ‰å¾ˆå¤§å¸®åŠ©ï¼",
      B: "æ˜å¤©è¯•ç€å‡ºé—¨èµ°èµ°ï¼Œæ¢æ¢ç¯å¢ƒä¼šè®©å¿ƒæƒ…å¥½å¾ˆå¤š"
    },
    badge: "ğŸŒ³ æˆ·å¤–æ¢ç´¢"
  },
  {
    question: "ä»Šå¤©æœ‰å’Œåˆ«äººèŠå¤©å—ï¼Ÿ",
    answers: {
      A: "æœ‰çš„ï¼Œå’Œæœ‹å‹/å®¶äººèŠäº†èŠ",
      B: "æ²¡æœ‰ï¼Œä¸€ç›´ä¸€ä¸ªäºº"
    },
    feedback: {
      A: "ä¿æŒç¤¾äº¤è”ç³»æ˜¯å¾ˆå¥½çš„ï¼è¿™æ ·èƒ½è·å¾—æ›´å¤šæ”¯æŒ",
      B: "ç»™å…³å¿ƒçš„äººå‘ä¸ªæ¶ˆæ¯å§ï¼Œäº¤æµèƒ½å¸¦æ¥æ¸©æš–"
    },
    badge: "ğŸ—£ï¸ ç¤¾äº¤è¾¾äºº"
  },
  {
    question: "ä»Šå¤©ä½ åƒå¾—å¥½å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼ŒæŒ‰æ—¶åƒäº†è¥å…»å‡è¡¡çš„é¥­èœ",
      B: "æ²¡æœ‰ï¼Œé¥®é£Ÿå¾ˆä¸è§„å¾‹"
    },
    feedback: {
      A: "ç…§é¡¾å¥½èº«ä½“å¾ˆé‡è¦ï¼ç»§ç»­ä¿æŒå§",
      B: "ä»ä¸‹ä¸€é¡¿å¼€å§‹ï¼Œè¯•ç€åƒäº›å¥åº·çš„é£Ÿç‰©å§"
    },
    badge: "ğŸ å¥åº·é¥®é£Ÿ"
  },
  {
    question: "ä»Šå¤©æœ‰æ§åˆ¶ç©æ‰‹æœºçš„æ—¶é—´å—ï¼Ÿ",
    answers: {
      A: "æœ‰çš„ï¼Œæˆ‘æœ‰æ„è¯†åœ°å‡å°‘äº†ä½¿ç”¨æ—¶é—´",
      B: "æ²¡æœ‰ï¼Œä¸€ç›´åœ¨åˆ·æ‰‹æœº"
    },
    feedback: {
      A: "æ§åˆ¶å¥½æ‰‹æœºä½¿ç”¨æ—¶é—´ï¼Œèƒ½è®©å¿ƒæƒ…æ›´å¹³é™",
      B: "è¯•ç€è®¾å®šä½¿ç”¨æ—¶é—´é™åˆ¶ï¼Œç»™è‡ªå·±ä¸€äº›ç¦»å¼€å±å¹•çš„æ—¶é—´"
    },
    badge: "ğŸ“± æ•°å­—å¹³è¡¡"
  },
  {
    question: "ä»Šå¤©ä½ æœ‰åˆ¶å®šä»€ä¹ˆè®¡åˆ’å—ï¼Ÿ",
    answers: {
      A: "æœ‰çš„ï¼Œæˆ‘åˆ—äº†ä¸€äº›è¦åšçš„äº‹æƒ…",
      B: "æ²¡æœ‰ï¼Œæ„Ÿè§‰å¾ˆè¿·èŒ«"
    },
    feedback: {
      A: "æœ‰è®¡åˆ’çš„ç”Ÿæ´»æ›´æœ‰æ–¹å‘æ„Ÿï¼å¾ˆæ£’ï¼",
      B: "ä»å†™ä¸‹æ˜å¤©è¦åšçš„ä¸‰ä»¶å°äº‹å¼€å§‹å§"
    },
    badge: "ğŸ“ è§„åˆ’å¤§å¸ˆ"
  },
  {
    question: "ä»Šå¤©æœ‰å–å¤Ÿæ°´äº†å—ï¼Ÿ",
    answers: {
      A: "æœ‰çš„ï¼Œæˆ‘æœ‰æ³¨æ„è¡¥å……æ°´åˆ†",
      B: "æ²¡æœ‰ï¼Œç»å¸¸å¿˜è®°å–æ°´"
    },
    feedback: {
      A: "ä¿æŒå……è¶³çš„æ°´åˆ†å¯¹èº«å¿ƒéƒ½å¾ˆé‡è¦ï¼",
      B: "è®¾ä¸ªå–æ°´æé†’å§ï¼Œç…§é¡¾å¥½è‡ªå·±å¾ˆé‡è¦"
    },
    badge: "ğŸ’§ é¥®æ°´è¾¾äºº"
  },
  {
    question: "ä»Šå¤©ç¡çœ å……è¶³å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œç¡å¾—æŒºå¥½çš„",
      B: "æ²¡æœ‰ï¼Œç¡çœ è´¨é‡ä¸å¤ªå¥½"
    },
    feedback: {
      A: "å¥½çš„ç¡çœ æ˜¯è°ƒèŠ‚å¿ƒæƒ…çš„å…³é”®ï¼ç»§ç»­ä¿æŒ",
      B: "è¯•ç€å…»æˆè§„å¾‹çš„ä½œæ¯ï¼Œä¼šå¸®åŠ©æ”¹å–„ç¡çœ è´¨é‡"
    },
    badge: "ğŸ˜´ ç¡çœ å«å£«"
  }
];

const anxietyQuestions = [
  {
    question: "å½“æ„Ÿåˆ°ç„¦è™‘æ—¶ï¼Œä½ ä¼šå°è¯•æ·±å‘¼å¸å†¥æƒ³å—ï¼Ÿ",
    answers: {
      A: "ä¼šçš„ï¼Œæˆ‘ä¼šé€šè¿‡å‘¼å¸æ¥å¹³é™è‡ªå·±",
      B: "ä¸ä¼šï¼Œæˆ‘é€šå¸¸ä»»ç”±ç„¦è™‘æƒ…ç»ªå‘å±•"
    },
    feedback: {
      A: "å¤ªå¥½äº†ï¼æ·±å‘¼å¸æ˜¯ç¼“è§£ç„¦è™‘çš„æœ‰æ•ˆæ–¹æ³•ã€‚ä¿æŒç»ƒä¹ ï¼", 
      B: "å»ºè®®å°è¯•4-7-8å‘¼å¸æ³•ï¼šå¸æ°”4ç§’ï¼Œå±æ¯7ç§’ï¼Œå‘¼æ°”8ç§’ã€‚"
    },
    badge: "ğŸ« å†¥æƒ³å¤§å¸ˆ"
  },
  {
    question: "ä½ èƒ½å¯Ÿè§‰åˆ°è‡ªå·±ç„¦è™‘çš„èº«ä½“ååº”å—ï¼Ÿï¼ˆå¦‚å¿ƒè·³åŠ å¿«ã€æ‰‹å¿ƒå‡ºæ±—ï¼‰",
    answers: {
      A: "èƒ½ï¼Œæˆ‘ä¼šæ³¨æ„åˆ°è¿™äº›èº«ä½“ä¿¡å·",
      B: "ä¸èƒ½ï¼Œæˆ‘å¾ˆéš¾è§‰å¯Ÿè¿™äº›å˜åŒ–"
    },
    feedback: {
      A: "è§‰å¯ŸåŠ›å¾ˆå¥½ï¼åŠæ—¶å‘ç°ç„¦è™‘ä¿¡å·æ˜¯å¾ˆé‡è¦çš„ç¬¬ä¸€æ­¥ã€‚",
      B: "è¯•ç€å¤šå…³æ³¨èº«ä½“æ„Ÿå—ï¼Œè¿™æ ·èƒ½æ›´æ—©åœ°è§‰å¯Ÿå’Œåº”å¯¹ç„¦è™‘ã€‚"
    },
    badge: "ğŸ§  è§‰å¯Ÿé«˜æ‰‹"
  },
  {
    question: "é¢å¯¹ç„¦è™‘æ—¶ï¼Œä½ ä¼šé‡‡å–ä»€ä¹ˆè¡ŒåŠ¨ï¼Ÿ",
    answers: {
      A: "æˆ‘ä¼šä¸»åŠ¨å¯»æ‰¾æ–¹æ³•ç¼“è§£ç„¦è™‘",
      B: "æˆ‘é€šå¸¸ä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰å®ƒè‡ªå·±è¿‡å»"
    },
    feedback: {
      A: "ç§¯æé¢å¯¹æ˜¯å¾ˆå¥½çš„æ€åº¦ï¼ç»§ç»­ä¿æŒï¼",
      B: "å»ºè®®å­¦ä¹ ä¸€äº›åº”å¯¹æŠ€å·§ï¼Œæ¯”å¦‚æ­£å¿µç»ƒä¹ æˆ–è¿åŠ¨ã€‚"
    },
    badge: "â­ åº”å¯¹èƒ½æ‰‹"
  }
];

// Add a helper function to get badge type
function getBadgeType(badge) {
  const badgeMap = {
    // Sad island badges
    'ğŸƒ è¿åŠ¨è¾¾äºº': 'exercise',
    'ğŸŒ³ æˆ·å¤–æ¢ç´¢': 'outdoor', 
    'ğŸ—£ï¸ ç¤¾äº¤è¾¾äºº': 'social',
    'ğŸ å¥åº·é¥®é£Ÿ': 'healthy',
    'ğŸ“± æ•°å­—å¹³è¡¡': 'digital',
    'ğŸ“ è§„åˆ’å¤§å¸ˆ': 'planning',
    'ğŸ’§ é¥®æ°´è¾¾äºº': 'hydration',
    'ğŸ˜´ ç¡çœ å«å£«': 'sleep',
    // Anxiety island badges
    'ğŸ« å†¥æƒ³å¤§å¸ˆ': 'breathe',
    'ğŸ§  è§‰å¯Ÿé«˜æ‰‹': 'aware',
    'â­ åº”å¯¹èƒ½æ‰‹': 'cope'
  };
  
  return badgeMap[badge] || '';
}

let currentStep = 1;
let selectedIsland = null;
let currentIsland = null;
let collectedGems = {
  sad: [],
  anxiety: []
};

// Function to show intro animation
function showIntroAnimation() {
  const introOverlay = document.createElement('div');
  introOverlay.className = 'intro-overlay';
  
  const content = `
    <h1 class="intro-title">æƒ…ç»ªæ¢é™©ä¹‹æ—…</h1>
    <div class="intro-text">
      æ¬¢è¿æ¥åˆ°è¿™ä¸ªå……æ»¡ç¥ç§˜å’Œå¥‡å¦™çš„æƒ…ç»ªä¸–ç•Œï¼è¿™é‡Œç”±äº”åº§æƒ…ç»ªå²›å±¿ç»„æˆï¼Œæ¯ä¸ªå²›å±¿ä»£è¡¨ç€ä¸åŒçš„æƒ…ç»ªã€‚
      ä½œä¸ºä¸€åå‹‡æ•¢çš„æ¢é™©è€…ï¼Œä½ å°†ä»å†…å¿ƒçš„"å¿ƒæƒ…å¤©æ°”"å¼€å§‹ï¼Œå±•å¼€ä¸€åœºç‹¬ç‰¹çš„å¿ƒçµå†’é™©ã€‚
      é€šè¿‡ä¸å²›å±¿ä¸Šçš„ä»»åŠ¡å’ŒæŒ‘æˆ˜äº’åŠ¨ï¼Œé‡æ–°æ‰¾å›æƒ…ç»ªçš„å¹³è¡¡ä¸åŠ¨åŠ›ã€‚
    </div>
    <div class="emotion-compass">
      <div class="compass-circle"></div>
      <div class="emotion-symbol" style="top: 0; left: 50%; transform: translate(-50%, -50%)">ğŸŒ</div>
      <div class="emotion-symbol" style="top: 50%; right: 0; transform: translate(50%, -50%)">â›…</div>
      <div class="emotion-symbol" style="bottom: 0; left: 50%; transform: translate(-50%, 50%)">ğŸŒ§ï¸</div>
      <div class="emotion-symbol" style="top: 50%; left: 0; transform: translate(-50%, -50%)">ğŸŒªï¸</div>
    </div>
    <button class="start-journey">å¼€å§‹æ¢é™©</button>
  `;
  
  introOverlay.innerHTML = content;
  document.body.appendChild(introOverlay);
  
  // Add click handler for start button
  const startButton = introOverlay.querySelector('.start-journey');
  startButton.addEventListener('click', () => {
    introOverlay.style.opacity = '0';
    setTimeout(() => {
      introOverlay.remove();
      document.querySelector('.game-container').style.display = 'block';
    }, 1000);
  });
}

// Modify the DOMContentLoaded event listener
document.addEventListener('DOMContentLoaded', () => {
  // Hide game container initially
  document.querySelector('.game-container').style.display = 'none';
  
  // Show intro animation
  showIntroAnimation();
  
  initializeIslands();
  setupEventListeners();
  // Start with back button hidden
  document.getElementById('backBtn').style.display = 'none';
});

function initializeIslands() {
  // Only create eggs when showing island content
  setupEventListeners();
}

function showIslandContent() {
  if (!selectedIsland) {
    console.error('No island selected');
    return;
  }

  // Clear previous content
  const islandContainer = document.querySelector('.island-content');
  islandContainer.innerHTML = '';

  // Create island specific HTML based on selected island
  let islandHtml = '';
  
  if (selectedIsland === 'sad') {
    islandHtml = `
      <div id="sad-island" style="display: block">
        <div class="progress-bar">
          <div class="progress-fill"></div>  
        </div>
        <div class="badge-collection">
          ${sadQuestions.map((q, i) => `
            <div class="badge" data-badge-index="${i}">
              <span class="badge-icon">${q.badge.split(' ')[0]}</span>
              <span class="badge-name">${q.badge.split(' ')[1]}</span>
            </div>
          `).join('')}
        </div>
        <div id="sad-eggs" class="egg-container"></div>
        <div id="sad-gems" class="gem-collection"></div>
        <div class="completion-reward">
          <h3>æ­å–œå®Œæˆæ‚²ä¼¤å²›çš„æ¢ç´¢! ğŸ‰</h3>
          <div class="reward-icon">ğŸ†</div>
          <p>ä½ å·²ç»å­¦ä¼šäº†æ¥çº³å’Œå¤„ç†æ‚²ä¼¤çš„æƒ…ç»ª</p>
        </div>
      </div>
    `;
  } else if (selectedIsland === 'anxiety') {
    islandHtml = `
      <div id="anxiety-island" style="display: block">
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
        <div class="badge-collection">
          ${anxietyQuestions.map((q, i) => `
            <div class="badge" data-badge-index="${i}">
              <span class="badge-icon">${q.badge.split(' ')[0]}</span>
              <span class="badge-name">${q.badge.split(' ')[1]}</span>
            </div>
          `).join('')}
        </div>
        <div id="anxiety-eggs" class="egg-container"></div>
        <div id="anxiety-gems" class="gem-collection"></div>
        <div class="completion-reward">
          <h3>æ­å–œå®Œæˆç„¦è™‘å²›çš„æ¢ç´¢! ğŸ‰</h3>
          <div class="reward-icon">ğŸ†</div>
          <p>ä½ å·²ç»æŒæ¡äº†åº”å¯¹ç„¦è™‘çš„æŠ€å·§</p>
        </div>
      </div>
    `;
  } else if (selectedIsland === 'happy') {
    islandHtml = `
      <div id="happy-island">
        <h2 class="checkin-title">âœ¨ å¿«ä¹ç­¾åˆ°å¢™ âœ¨</h2>
        <div class="checkin-wall" id="checkin-wall"></div>
        <button id="checkin-btn" class="answer-btn">ä»Šæ—¥ç­¾åˆ°</button>
        <div class="share-message" id="share-message">
          æ„Ÿè°¢åˆ†äº«æ‚¨çš„å–œæ‚¦! è®©æˆ‘ä»¬ä¸€èµ·ä¼ é€’å¿«ä¹èƒ½é‡ ğŸŒŸ
        </div>
      </div>
    `;
  } else if (selectedIsland === 'relax') {
    islandHtml = `
      <div id="relax-island" style="display: block">
        <h2 class="step-title">æ”¾æ¾å°è´´å£«å­˜é’±ç½</h2>
        <div class="piggy-bank">
          <svg viewBox="0 0 100 100">
            <path d="M20,50 C20,30 40,20 50,20 C60,20 80,30 80,50 C80,70 60,80 50,80 C40,80 20,70 20,50" 
                  fill="#FFB6C1" stroke="#FF69B4" stroke-width="2"/>
            <circle cx="40" cy="45" r="3" fill="#000"/>
            <path d="M55,55 Q60,60 65,55" fill="none" stroke="#000" stroke-width="2"/>
            <path d="M75,45 Q80,40 85,45" fill="none" stroke="#FF69B4" stroke-width="3"/>
          </svg>
        </div>
        <div id="relax-tips"></div>
      </div>
    `;
  }

  islandContainer.innerHTML = islandHtml;

  // Now that containers exist, we can create eggs and gems
  if (selectedIsland === 'sad') {
    createEggs('sad-eggs', sadQuestions.length);
    createGems('sad-gems', sadQuestions.length);
    initializeSadIsland();
  } else if (selectedIsland === 'anxiety') {
    createEggs('anxiety-eggs', anxietyQuestions.length);
    createGems('anxiety-gems', anxietyQuestions.length);
    initializeAnxietyIsland();
  } else if (selectedIsland === 'happy') {
    initializeHappyIsland();
  } else if (selectedIsland === 'relax') {
    initializeRelaxIsland();
  }
}

function createEggs(containerId, count) {
  const container = document.getElementById(containerId);
  for (let i = 0; i < count; i++) {
    const egg = document.createElement('div');
    egg.className = 'egg';
    egg.dataset.index = i;
    container.appendChild(egg);
  }
}

function createGems(containerId, count) {
  const container = document.getElementById(containerId);
  for (let i = 0; i < count; i++) {
    const gem = document.createElement('div');
    gem.className = 'gem';
    gem.innerHTML = 'ğŸ’';
    container.appendChild(gem);
  }
}

function setupEventListeners() {
  // Add back button handler
  const backBtn = document.getElementById('backBtn');
  backBtn.addEventListener('click', () => {
    if (currentStep > 1) {
      currentStep--;
      updateStepDisplay();
      backBtn.style.display = currentStep > 1 ? 'block' : 'none';
    }
  });

  // Weather selection handlers
  document.querySelectorAll('.weather-option').forEach(option => {
    option.addEventListener('click', () => {
      selectedIsland = option.dataset.island;
      
      // Highlight selected weather
      document.querySelectorAll('.weather-option').forEach(opt => {
        opt.style.transform = 'scale(1)';
        opt.style.border = '2px solid transparent';
      });
      option.style.transform = 'scale(1.05)';
      option.style.border = '2px solid white';

      // Progress to next step after short delay
      setTimeout(() => {
        currentStep = 2;
        updateStepDisplay();
        document.getElementById('backBtn').style.display = 'block';
      }, 300);
    });
  });

  // Island intro click handler to progress to activities
  document.querySelector('.island-intro').addEventListener('click', () => {
    currentStep = 3;
    updateStepDisplay();
  });

  setupIslandEventListeners();

  document.querySelector('.close-modal').addEventListener('click', closeModal);
}

function setupIslandEventListeners() {
  // Setup specific island features
  switch(selectedIsland) {
    case 'happy':
      initializeHappyIsland();
      break;
    case 'relax':
      initializeRelaxIsland();
      break;
    case 'sad':
      initializeSadIsland();
      break;
    case 'anxiety':
      initializeAnxietyIsland();
      break;
  }
}

function updateStepDisplay() {
  // Update step dots
  document.querySelectorAll('.step-dot').forEach(dot => {
    dot.classList.remove('active');
  });
  const currentDot = document.querySelector(`.step-dot[data-step="${currentStep}"]`);
  if (currentDot) {
    currentDot.classList.add('active');
  }

  // Update step containers
  document.querySelectorAll('.step-container').forEach(container => {
    container.classList.remove('active');
  });
  const currentStepContainer = document.getElementById(`step${currentStep}`);
  if (currentStepContainer) {
    currentStepContainer.classList.add('active');
  }

  // Handle step-specific updates
  if (currentStep === 2) {
    updateIslandIntro();
  } else if (currentStep === 3) {
    showIslandContent();
  }
}

function updateIslandIntro() {
  const introContent = {
    happy: {
      title: "å¿«ä¹å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          è¿™é‡Œå……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼Œè®©æˆ‘ä»¬ä¸€èµ·åˆ†äº«å¿«ä¹çš„æ—¶å…‰ã€‚
        </div>
        <button class="answer-btn" id="start-happy-journey" style="display: block; margin: 20px auto;">
          å¼€å§‹æ¢ç´¢ â˜€ï¸
        </button>
      `,
      icon: "ğŸŒ"
    },
    relax: {
      title: "æ”¾æ¾å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          åœ¨è¿™é‡Œæ”¾ä¸‹çƒ¦å¿§ï¼Œäº«å—å®é™ä¸å¹³å’Œã€‚
        </div>
        <button class="answer-btn" id="start-relax-journey" style="display: block; margin: 20px auto;">
          å¼€å§‹æ¢ç´¢ ğŸŒº
        </button>
      `,
      icon: "â›…"
    },
    sad: {
      title: "æ‚²ä¼¤å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          æˆ‘ä»¬å°†ä¸€èµ·é¢å¯¹å’Œæ¥çº³è¿™äº›æƒ…ç»ªï¼Œè®©å¿ƒæƒ…æ…¢æ…¢å˜å¾—æ™´æœ—ã€‚
        </div>
        <button class="answer-btn" id="start-sad-journey" style="display: block; margin: 20px auto;">
          å¼€å§‹æ¢ç´¢ âœ¨
        </button>
      `,
      icon: "ğŸŒ§ï¸"
    },
    anxiety: {
      title: "ç„¦è™‘å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸€èµ·å­¦ä¹ å¦‚ä½•åº”å¯¹ç„¦è™‘ï¼Œæ‰¾åˆ°å†…å¿ƒçš„å¹³é™ã€‚
          é€šè¿‡å®Œæˆä¸€ç³»åˆ—ä»»åŠ¡ï¼Œä½ å°†æŒæ¡å®ç”¨çš„ç„¦è™‘ç®¡ç†æŠ€å·§ã€‚
        </div>
        <button class="answer-btn" id="start-anxiety-journey" style="display: block; margin: 20px auto;">
          å¼€å§‹æ¢ç´¢ ğŸŒŸ
        </button>
      `,
      icon: "ğŸŒªï¸"
    }
  };

  const intro = introContent[selectedIsland];
  document.querySelectorAll('.island-name').forEach(el => {
    el.textContent = intro.title;
  });
  
  const introHtml = `
    <div class="island-intro-content" style="text-align: center; padding: 40px;">
      <div style="font-size: 64px; margin-bottom: 20px;">${intro.icon}</div>
      <div style="font-size: 18px; line-height: 1.6;">${intro.description}</div>
    </div>
  `;
  
  document.querySelector('.island-intro').innerHTML = introHtml;

  // Add click handlers for all journey buttons
  ['happy', 'relax', 'sad', 'anxiety'].forEach(islandType => {
    const startButton = document.getElementById(`start-${islandType}-journey`);
    if (startButton) {
      startButton.addEventListener('click', () => {
        currentStep = 3;
        updateStepDisplay();
      });
    }
  });
}

function handleEggClick(egg) {
  const index = parseInt(egg.dataset.index);
  const questions = currentIsland === 'sad' ? sadQuestions : anxietyQuestions;
  
  if (collectedGems[currentIsland].includes(index)) {
    return;
  }

  egg.classList.add('cracking');
  createEggParticles(egg);
  
  const reward = document.createElement('div');
  reward.className = 'reward';
  reward.textContent = 'ğŸ';
  egg.appendChild(reward);
  
  setTimeout(() => {
    reward.classList.add('falling');
    egg.classList.add('opened');
    showQuestion(questions[index], index);
  }, 500);
}

function createEggParticles(egg) {
  const particlesContainer = document.createElement('div');
  particlesContainer.className = 'egg-particles';
  
  for (let i = 0; i < 10; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    const angle = (i / 10) * Math.PI * 2;
    const speed = 2 + Math.random() * 2;
    
    particle.style.left = '50%';
    particle.style.top = '50%';
    
    const animation = particle.animate([
      { transform: 'translate(-50%, -50%)' },
      { 
        transform: `translate(${Math.cos(angle) * 50}px, ${Math.sin(angle) * 50}px)`,
        opacity: 0
      }
    ], {
      duration: 1000,
      easing: 'ease-out'
    });
    
    particlesContainer.appendChild(particle);
  }
  
  egg.appendChild(particlesContainer);
  setTimeout(() => particlesContainer.remove(), 1000);
}

function showQuestion(questionData, index) {
  const modal = document.getElementById('question-modal');
  const questionText = document.getElementById('question-text');
  const answerButtons = modal.querySelectorAll('.answer-btn');

  // Make sure buttons are visible for new questions
  answerButtons.forEach(btn => btn.style.display = 'block');

  questionText.textContent = questionData.question;
  answerButtons[0].textContent = questionData.answers.A;
  answerButtons[1].textContent = questionData.answers.B;

  answerButtons.forEach(button => {
    button.onclick = () => handleAnswer(questionData, button.dataset.answer, index);
  });

  modal.style.display = 'block';
}

function handleAnswer(questionData, answer, index) {
  const modal = document.getElementById('question-modal');
  const questionText = document.getElementById('question-text');
  const answerButtons = modal.querySelectorAll('.answer-btn');
  
  answerButtons.forEach(btn => btn.style.display = 'none');
  
  questionText.innerHTML = `
    ${questionData.feedback[answer]}
    <div style="margin-top: 15px; font-size: 1.2em;">
      è·å¾—å¾½ç« : ${questionData.badge}
    </div>
  `;
  
  // Unlock the corresponding badge
  const badge = document.querySelector(`.badge[data-badge-index="${index}"]`);
  if (badge && !badge.classList.contains('unlocked')) {
    badge.classList.add('unlocked');
  }
  
  if (!collectedGems[currentIsland].includes(index)) {
    collectedGems[currentIsland].push(index);
    updateGems();
    updateProgress();
  }
  
  setTimeout(() => {
    closeModal();
    answerButtons.forEach(btn => btn.style.display = 'block');
  }, 2000);
}

function updateProgress() {
  const islandType = currentIsland;
  const totalQuestions = islandType === 'sad' ? sadQuestions.length : anxietyQuestions.length;
  const progress = (collectedGems[islandType].length / totalQuestions) * 100;
  
  const progressBar = document.querySelector(`#${islandType}-island .progress-fill`);
  progressBar.style.width = `${progress}%`;

  // Only update the achievement for the current answered question
  const lastAnsweredIndex = collectedGems[islandType][collectedGems[islandType].length - 1];
  if (lastAnsweredIndex !== undefined) {
    const questionData = sadQuestions[lastAnsweredIndex];
    if (questionData && questionData.badge) {
      const achievementType = getBadgeType(questionData.badge);
      const achievement = document.querySelector(`.achievement[data-achievement="${achievementType}"]`);
      if (achievement && !achievement.classList.contains('unlocked')) {
        achievement.classList.add('unlocked');
        createCelebration();
      }
    }
  }

  // Check completion
  if (progress === 100) {
    showCompletionReward(islandType);
  }
}

function createCelebration() {
  const celebration = document.createElement('div');
  celebration.className = 'celebration';
  
  for (let i = 0; i < 50; i++) {
    const confetti = document.createElement('div');
    confetti.style.position = 'absolute';
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.top = -20 + 'px';
    confetti.style.transform = 'rotate(' + (Math.random() * 360) + 'deg)';
    confetti.textContent = ['âœ¨', 'ğŸŒŸ', 'ğŸ’«'][Math.floor(Math.random() * 3)];
    
    const animation = confetti.animate([
      { transform: 'translateY(0) rotate(0)', opacity: 1 },
      { transform: `translateY(${window.innerHeight}px) rotate(${360 + Math.random() * 360}deg)`, opacity: 0 }
    ], {
      duration: 1500 + Math.random() * 1000,
      easing: 'ease-out'
    });
    
    celebration.appendChild(confetti);
  }
  
  document.body.appendChild(celebration);
  setTimeout(() => celebration.remove(), 2500);
}

function updateGems() {
  const gems = document.querySelectorAll(`#${currentIsland}-gems .gem`);
  collectedGems[currentIsland].forEach(index => {
    gems[index].classList.add('collected');
  });
  
  // Remove the problematic showCompletionModal call
  if (collectedGems[currentIsland].length === gems.length) {
    setTimeout(() => {
      showCompletionReward(currentIsland);
    }, 1000);
  }
}

// Make sure the showCompletionReward function shows all necessary completion info
function showCompletionReward(islandType) {
  const rewardDiv = document.querySelector(`#${islandType}-island .completion-reward`);
  if (rewardDiv) {
    rewardDiv.style.display = 'block';
    rewardDiv.style.animation = 'fadeIn 0.5s ease';
    
    // Create celebration effects
    createCelebration();
  }
}

function closeModal() {
  document.getElementById('question-modal').style.display = 'none';
}

function initializeHappyIsland() {
  const checkinBtn = document.getElementById('checkin-btn');
  const checkinWall = document.getElementById('checkin-wall');
  const shareMessage = document.getElementById('share-message');

  if (!checkinBtn || !checkinWall || !shareMessage) return;

  checkinBtn.addEventListener('click', () => {
    // Create a new checkin entry with animation
    const entry = document.createElement('div');
    entry.className = 'checkin-entry';
    
    // Get current date and time
    const now = new Date();
    const dateStr = `${now.getMonth() + 1}/${now.getDate()}`;
    const timeStr = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}`;
    
    entry.innerHTML = `
      <span>âœ¨ æ¸¸å®¢${dateStr} ${timeStr}</span>
    `;
    
    checkinWall.appendChild(entry);
    
    // Show share message
    shareMessage.style.display = 'block';
    shareMessage.style.animation = 'fadeIn 0.5s ease';
    
    // Disable checkin button
    checkinBtn.disabled = true;
    checkinBtn.textContent = 'ä»Šæ—¥å·²ç­¾åˆ°';
    checkinBtn.style.opacity = '0.7';
  });
}

function initializeRelaxIsland() {
  const relaxTips = document.getElementById('relax-tips');
  if (!relaxTips) return;

  const relaxingTips = [
    "æ·±å‘¼å¸ä¸‰æ¬¡ï¼Œæ„Ÿå—å¹³é™",
    "é—­ä¸Šçœ¼ç›ï¼Œè†å¬å‘¨å›´çš„å£°éŸ³",
    "æ”¾æ¾è‚©è†€ï¼Œé‡Šæ”¾ç´§å¼ ",
    "å–ä¸€æ¯æ¸©æ°´ï¼Œæ„Ÿå—æ¸©æš–",
    "åšä¸€æ¬¡ç®€å•çš„ä¼¸å±•è¿åŠ¨",
    "å¬ä¸€é¦–èˆ’ç¼“çš„éŸ³ä¹",
    "æ¼«æ­¥5åˆ†é’Ÿ",
    "ç»™è‡ªå·±ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±"
  ];

  // Add click handler for piggy bank
  const piggyBank = document.querySelector('.piggy-bank');
  if (piggyBank) {
    piggyBank.addEventListener('click', () => {
      if (relaxingTips.length > 0) {
        // Get a random tip
        const randomIndex = Math.floor(Math.random() * relaxingTips.length);
        const tip = relaxingTips[randomIndex];
        
        // Create and animate coin/tip coming out of piggy bank
        const coinTip = document.createElement('p');
        coinTip.textContent = tip;
        coinTip.style.position = 'relative';
        coinTip.style.animation = 'messageAppear 0.5s ease';
        
        // Add to tips container
        relaxTips.insertBefore(coinTip, relaxTips.firstChild);
        
        // Animate piggy bank
        piggyBank.style.animation = 'shake 0.5s ease';
        setTimeout(() => {
          piggyBank.style.animation = '';
        }, 500);
      }
    });
  }
}

function initializeAnxietyIsland() {
  currentIsland = 'anxiety';
  
  const eggContainer = document.getElementById('anxiety-eggs');
  if (!eggContainer) return;

  eggContainer.querySelectorAll('.egg').forEach(egg => {
    egg.addEventListener('click', () => handleEggClick(egg));
  });
}

function initializeSadIsland() {
  currentIsland = 'sad';
  
  const eggContainer = document.getElementById('sad-eggs');
  if (!eggContainer) return;

  eggContainer.querySelectorAll('.egg').forEach(egg => {
    egg.addEventListener('click', () => handleEggClick(egg));
  });
}
</script></body></html>
