
<html><head><base href="/zh" target="_blank"><meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="é€šè¿‡äº’åŠ¨æƒ…ç»ªå²›å±¿æ¢ç´¢å¿«ä¹ã€æ”¾æ¾å’Œè‡ªæˆ‘å‘ç°çš„ç‹¬ç‰¹ä½“éªŒæ¸¸æˆã€‚æå‡æƒ…ç»ªæ™ºæ…§ï¼Œæ”¹å–„å¿ƒç†å¥åº·ã€‚">
  <meta name="keywords" content="æƒ…ç»ªå¥åº·,å¿ƒç†å¥åº·æ¸¸æˆ,æƒ…ç»ªè·Ÿè¸ª,ç„¦è™‘ç®¡ç†,æ”¾æ¾æŠ€å·§,äº’åŠ¨æ²»ç–—,æƒ…å•†,æ­£å¿µæ¸¸æˆ,å‡å‹,å¿ƒç†å¥åº·">
  <meta name="author" content="Emotional Games Studio">
  <link rel="canonical" href="https://mood-island.heytcm.com/zh" />

  <title>æƒ…ç»ªå²›æ¢é™© - äº’åŠ¨å¼æƒ…ç»ªå¥åº·ä¹‹æ—…</title>
  <meta property="og:title" content="æƒ…ç»ªæ¢é™© - äº’åŠ¨å¼æƒ…ç»ªå¥åº·ä¹‹æ—…">
  <meta property="og:description" content="åœ¨è¿™æ¬¾ç‹¬ç‰¹çš„æƒ…ç»ªå¥åº·æ¸¸æˆä¸­æ¢ç´¢æƒ…ç»ªå²›å±¿ã€‚å‘ç°å¿«ä¹ï¼Œå¯»æ‰¾å¹³é™ï¼Œå­¦ä¹ æƒ…ç»ªç®¡ç†æŠ€å·§ã€‚">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mood-island.heytc.com/zh">
  <style>
    :root {
      --happy-color: #FFD700;
      --relax-color: #87CEEB;
      --sad-color: #4682B4;
      --anxiety-color: #483D8B;
    }

    /* New landing page styles */
    .landing-page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      position: relative;
      overflow: hidden;
    }

    .landing-title {
      font-size: 3.5em;
      color: #fff;
      text-shadow: 0 0 10px rgba(255,255,255,0.5);
      margin-bottom: 30px;
      animation: glow 2s ease-in-out infinite alternate;
    }

    .landing-subtitle {
      font-size: 1.2em;
      color: #aaa;
      text-align: center;
      max-width: 600px;
      margin-bottom: 40px;
    }

    .start-game-btn {
      font-size: 1.5em;
      padding: 15px 40px;
      border: none;
      border-radius: 50px;
      background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .start-game-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(255,255,255,0.3);
    }

    .start-game-btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      animation: shine 3s infinite;
    }

    .floating-emotions {
      position: absolute;
      font-size: 2em;
      animation: float 6s ease-in-out infinite;
      opacity: 0.3;
    }

    @keyframes glow {
      from { text-shadow: 0 0 10px rgba(255,255,255,0.5); }
      to { text-shadow: 0 0 20px rgba(255,255,255,0.8), 0 0 30px rgba(255,255,255,0.6); }
    }

    @keyframes shine {
      0% { transform: translateX(-100%) rotate(45deg); }
      100% { transform: translateX(100%) rotate(45deg); }
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
      100% { transform: translateY(0px); }
    }

    .version-tag {
      position: absolute;
      top: 60px; /* Changed from 20px to move it lower */
      right: 20px;
      color: rgba(255,255,255,0.5);
      font-size: 0.8em;
    }

    .credits {
      position: absolute;
      bottom: 20px;
      color: rgba(255,255,255,0.5);
      font-size: 0.8em;
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      color: white;
      min-height: 100vh;
    }

    .game-container {
      max-width: 800px;
      margin: 0 auto;
    }

    /* Add new styles for steps display */
    .step-container {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .step-container.active {
      display: block;
    }

    .step-indicator {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      gap: 10px;
    }

    .step-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }

    .step-dot.active {
      background: white;
      transform: scale(1.2);
    }

    .step-title {
      text-align: center;
      margin-bottom: 30px;
      font-size: 24px;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .back-button {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 100;
    }

    .back-button:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    /* Remove navigation buttons styles */
    .navigation-buttons {
      display: none;
    }

    .weather-selector {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 20px 0;
    }

    .weather-option {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      border: 2px solid transparent;
    }

    .weather-option:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      border-color: white;
    }

    .weather-option[data-island="happy"] {
      border-color: var(--happy-color);
    }

    .weather-option[data-island="relax"] {
      border-color: var(--relax-color);
    }

    .weather-option[data-island="sad"] {
      border-color: var(--sad-color);
    }

    .weather-option[data-island="anxiety"] {
      border-color: var(--anxiety-color);
    }

    .island-container {
      display: none;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      margin-top: 20px;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .egg-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 20px;
    }

    .egg {
      width: 100px;
      height: 120px;
      margin: auto;
      cursor: pointer;
      position: relative;
      transition: transform 0.3s ease;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      background-image: url('https://raw.githubusercontent.com/iwenli/eggFrenzy/master/public/images/egg0.png');
    }

    .egg.opened {
      transform: scale(0.9);
      background-image: url('https://raw.githubusercontent.com/iwenli/eggFrenzy/master/public/images/egg4.png');
    }

    /* Remove the egg-svg styles since we won't use SVG anymore */
    .egg-svg {
      display: none;
    }

    .gem-collection {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .gem {
      width: 30px;
      height: 30px;
      opacity: 0.3;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .gem.collected {
      opacity: 1;
      animation: gemCollected 0.5s ease;
    }

    @keyframes gemCollected {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.95);
      padding: 30px;
      border-radius: 15px;
      z-index: 1000;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 0 20px rgba(255,255,255,0.1);
    }

    .modal-content {
      color: white;
      text-align: center;
    }

    .close-modal {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      color: white;
      font-size: 24px;
      transition: transform 0.3s ease;
    }

    .close-modal:hover {
      transform: rotate(90deg);
    }

    .answer-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 12px 24px;
      margin: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
    }

    .answer-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    #happy-messages, #relax-tips {
      margin-top: 20px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
    }

    #happy-messages p, #relax-tips p {
      margin: 10px 0;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      animation: messageAppear 0.5s ease;
    }

    @keyframes messageAppear {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .reward {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      opacity: 0;
      pointer-events: none;
    }

    .reward.falling {
      animation: fall 1s ease-out forwards;
    }

    @keyframes fall {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, 100px);
      }
    }

    .egg-particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      background: goldenrod;
      width: 4px;
      height: 4px;
      border-radius: 50%;
    }

    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      margin: 20px 0;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #8BC34A);
      width: 0%;
      transition: width 0.5s ease;
    }

    .achievement {
      display: inline-block;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      margin: 5px;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .achievement.unlocked {
      opacity: 1;
      background: rgba(76, 175, 80, 0.2);
      animation: achievementUnlock 0.5s ease;
    }

    @keyframes achievementUnlock {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .completion-reward {
      text-align: center;
      margin-top: 20px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      display: none;
    }

    .reward-icon {
      font-size: 40px;
      margin: 10px;
      animation: float 2s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Add styles for the badge display area */
    .badge-collection {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
    }

    .badge {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .badge.unlocked {
      opacity: 1;
      background: rgba(255, 255, 255, 0.2);
      animation: badgeUnlock 0.5s ease;
    }

    @keyframes badgeUnlock {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    .badge-icon {
      font-size: 1.2em;
    }

    .badge-name {
      font-size: 0.9em;
    }

    /* Add new styles for happy island */
    #happy-island {
      text-align: center;
      padding: 20px;
      background: linear-gradient(135deg, #FF6B6B, #FF8E8E);
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .checkin-wall {
      background: linear-gradient(45deg, #FFE5D9, #FFF1E6);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      min-height: 300px;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }

    .checkin-wall::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        45deg,
        rgba(255,255,255,0.1),
        rgba(255,255,255,0.1) 10px,
        rgba(255,255,255,0.2) 10px,
        rgba(255,255,255,0.2) 20px
      );
    }

    .checkin-title {
      color: #FF6B6B;
      font-size: 24px;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    #checkin-btn {
      background: linear-gradient(45deg, #4CAF50, #45B649);
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 25px;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    #checkin-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }

    .checkin-entry {
      background: white;
      padding: 10px 20px;
      border-radius: 20px;
      margin: 10px;
      display: inline-block;
      color: #333;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      animation: entryAppear 0.5s ease-out;
    }

    @keyframes entryAppear {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .share-message {
      color: white;
      font-size: 18px;
      margin: 20px 0;
      padding: 15px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
      display: none;
    }

    /* Add these new animation styles to the existing CSS */
    .intro-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      transition: opacity 1s ease;
    }

    .intro-title {
      font-size: 32px;
      color: #fff;
      margin-bottom: 30px;
      opacity: 0;
      transform: translateY(30px);
      animation: slideUp 1s ease forwards;
    }

    .intro-text {
      font-size: 18px;
      color: #fff;
      max-width: 800px;
      line-height: 1.6;
      opacity: 0;
      transform: translateY(30px);
      animation: slideUp 1s ease forwards 0.5s;
    }

    .emotion-compass {
      width: 200px;
      height: 200px;
      position: relative;
      margin: 40px auto;
      opacity: 0;
      animation: fadeIn 1s ease forwards 1.5s;
    }

    .compass-circle {
      width: 100%;
      height: 100%;
      border: 3px solid rgba(255,255,255,0.2);
      border-radius: 50%;
      position: absolute;
      animation: rotate 10s linear infinite;
    }

    .emotion-symbol {
      position: absolute;
      font-size: 24px;
      transform-origin: center;
    }

    .start-journey {
      margin-top: 30px;
      padding: 15px 30px;
      font-size: 18px;
      background: linear-gradient(45deg, #4CAF50, #45B649);
      border: none;
      border-radius: 25px;
      color: white;
      cursor: pointer;
      opacity: 0;
      transform: translateY(30px);
      animation: slideUp 1s ease forwards 2s;
      transition: all 0.3s ease;
    }

    .start-journey:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    @keyframes slideUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    @keyframes rotate {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes shake {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-5deg); }
      75% { transform: rotate(5deg); }
    }

    .piggy-bank {
      cursor: pointer;
      margin: 20px auto;
      width: 150px;
      transition: transform 0.3s ease;
    }

    .piggy-bank:hover {
      transform: scale(1.1);
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      padding: 40px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      transition: transform 0.3s ease;
    }

    .feature-card:hover {
      transform: translateY(-5px);
    }

    .feature-icon {
      font-size: 2.5em;
      margin-bottom: 15px;
    }

    .feature-title {
      font-size: 1.2em;
      color: #fff;
      margin-bottom: 10px;
    }

    .feature-description {
      color: #aaa;
      font-size: 0.9em;
      line-height: 1.6;
    }

    .testimonials {
      padding: 40px;
      text-align: center;
    }

    .testimonial-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 30px;
      border-radius: 15px;
      transition: transform 0.3s ease;
    }

    .rating {
      color: #FFD700;
      font-size: 1.2em;
      margin: 10px 0;
    }

    .scroll-down {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      animation: bounce 2s infinite;
      color: rgba(255,255,255,0.7);
      cursor: pointer;
      font-size: 1.2em;
      padding: 10px 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 25px;
      backdrop-filter: blur(5px);
      z-index: 10;
      transition: all 0.3s ease;
    }

    .scroll-down:hover {
      background: rgba(255,255,255,0.2);
      transform: translateX(-50%) translateY(-2px);
    }

    /* Update bounce animation */
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      40% {
        transform: translateX(-50%) translateY(-10px);
      }
      60% {
        transform: translateX(-50%) translateY(-5px);
      }
    }

    /* New styles for testimonials, benefits, how it works and FAQ sections */
    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      padding: 40px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .testimonial-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 30px;
      border-radius: 15px;
      transition: transform 0.3s ease;
    }

    .testimonial-card:hover {
      transform: translateY(-5px);
    }

    .benefits-section {
      padding: 60px 20px;
      text-align: center;
      background: rgba(255, 255, 255, 0.02);
    }

    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      max-width: 1200px;
      margin: 40px auto;
    }

    .benefit-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 30px;
      border-radius: 15px;
      transition: all 0.3s ease;
    }

    .benefit-card:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.08);
    }

    .section-title {
      font-size: 2.5em;
      color: #fff;
      margin-bottom: 20px;
      text-align: center;
    }

    .how-it-works {
      padding: 60px 20px;
    }

    .step-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 30px;
      border-radius: 15px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .step-number {
      font-size: 2em;
      color: var(--happy-color);
      font-weight: bold;
    }

    .faq-section {
      padding: 60px 20px;
      max-width: 800px;
      margin: 0 auto;
    }

    .faq-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .faq-item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid transparent;
    }

    .faq-item:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }

    .faq-question {
      font-weight: bold;
      color: #fff;
      margin-bottom: 10px;
      position: relative;
      padding-right: 30px;
    }

    .faq-question::after {
      content: '+';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      transition: transform 0.3s ease;
    }

    .faq-item.active .faq-question::after {
      transform: translateY(-50%) rotate(45deg);
    }

    .faq-answer {
      color: #aaa;
      display: none;
      line-height: 1.6;
      padding-top: 10px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .faq-item.active {
      background: rgba(255, 255, 255, 0.1);
    }

    .faq-item.active .faq-answer {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Add new styles for the future features section */
    .future-features {
      padding: 60px 20px;
      background: rgba(255, 255, 255, 0.02);
      margin-top: 40px;
    }

    .feature-group {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      gap: 60px;
      padding: 20px;
    }

    .feature-group h3 {
      color: #FFD700;  /* Change to golden color */
      font-size: 1.8em;
      margin: 20px 0;
      text-align: left;
      position: relative;
      padding-left: 20px;
    }

    .feature-group h3::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      width: 4px;
      height: 80%;
      background: #FFD700;
      transform: translateY(-50%);
    }

    .feature-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin: 20px 0;
    }

    .feature-item {
      background: rgba(255, 255, 255, 0.05);
      padding: 30px;
      border-radius: 15px;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      gap: 15px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .feature-item:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .feature-icon-large {
      font-size: 2.5em;
      margin-bottom: 10px;
      background: rgba(255, 255, 255, 0.1);
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .feature-item:hover .feature-icon-large {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 0.2);
    }

    .feature-title {
      color: #fff;
      font-size: 1.3em;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .feature-description {
      color: #aaa;
      font-size: 0.95em;
      line-height: 1.6;
      flex-grow: 1;
    }

    /* Add responsive adjustments */
    @media (max-width: 768px) {
      .feature-list {
        grid-template-columns: 1fr;
      }
      
      .feature-group h3 {
        font-size: 1.5em;
        margin: 15px 0;
      }
      
      .feature-item {
        padding: 20px;
      }
    }
  </style></head><body>
<div class="language-selector">
  <select id="languageSelect">
    <option value="en">English</option>
    <option value="zh" selected>ä¸­æ–‡</option>
    <option value="es">EspaÃ±ol</option>
    <option value="fr">FranÃ§ais</option>
    <option value="de">Deutsch</option>
  </select>
</div>
<div class="landing-page" id="landing-page">
  <div class="version-tag">ç‰ˆæœ¬ 1.0.0</div>
  
  <h1 class="landing-title">æƒ…ç»ªæ¢é™©ä¹‹æ—…</h1>
  <p class="landing-subtitle">
    è¸ä¸Šä¸€æ®µé€šè¿‡äº’åŠ¨æƒ…ç»ªå²›å±¿æ¢ç´¢å†…å¿ƒä¸–ç•Œçš„ç‹¬ç‰¹æ—…ç¨‹ï¼Œé€šè¿‡å¿«ä¹ã€å¹³é™å’Œè‡ªæˆ‘å‘ç°å¼€å¯æ‚¨çš„æƒ…ç»ªå¥åº·ä¹‹æ—…ã€‚
  </p>
  
  <button class="start-game-btn" id="start-game-btn" href="/game">
    å¼€å§‹æ¢é™©
  </button>

  <div class="feature-grid">
    <div class="feature-card">
      <div class="feature-icon">ğŸï¸</div>
      <h3 class="feature-title">4 ä¸ªç‹¬ç‰¹çš„å²›å±¿</h3>
      <p class="feature-description">æ¢ç´¢å¿«ä¹ã€æ”¾æ¾ã€æ‚²ä¼¤å’Œç„¦è™‘çš„å²›å±¿ï¼Œæ¯ä¸ªå²›å±¿æä¾›ç‹¬ç‰¹çš„æŒ‘æˆ˜å’Œæ²»æ„ˆä½“éªŒã€‚</p>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon">ğŸ¯</div>
      <h3 class="feature-title">äº’åŠ¨æŒ‘æˆ˜</h3>
      <p class="feature-description">å‚ä¸å¿ƒç†å¥åº·ä¸“ä¸šäººå£«è®¾è®¡çš„æœ‰æ„ä¹‰æ´»åŠ¨ï¼Œä»¥æ”¹å–„æƒ…ç»ªå¥åº·ã€‚</p>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon">ğŸ†</div>
      <h3 class="feature-title">æˆå°±ç³»ç»Ÿ</h3>
      <p class="feature-description">è·å¾—å¾½ç« å¹¶è·Ÿè¸ªæ‚¨çš„è¿›æ­¥ï¼ŒåŸ¹å…»æƒ…ç»ªç®¡ç†æŠ€èƒ½ã€‚</p>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon">ğŸ’—</div>
      <h3 class="feature-title">å¿ƒåŠ›å¢é•¿</h3>
      <p class="feature-description">ä»å¤©ã€åœ°ã€äººæ±²å–ç”Ÿå‘½æœ¬æºåŠ›é‡ï¼ŒææŒ¯è‡ªå·±çš„å¿ƒåŠ›</p>
    </div>
  </div>

  <div class="benefits-section">
    <h2 class="section-title">ä¸ºä»€ä¹ˆé€‰æ‹©æƒ…ç»ªæ¢é™©ï¼Ÿ</h2>
    <div class="benefits-grid">
      <div class="benefit-card">
        <div class="benefit-icon">ğŸ§ </div>
        <h3>åŸºäºç§‘å­¦çš„æ–¹æ³•</h3>
        <p>åŸºäºç»è¿‡éªŒè¯çš„å¿ƒç†å­¦æŠ€æœ¯å’Œæƒ…ç»ªæ™ºåŠ›åŸåˆ™</p>
      </div>
      <div class="benefit-card">
        <div class="benefit-icon">ğŸ®</div>
        <h3>æ¸¸æˆåŒ–ä½“éªŒ</h3>
        <p>å°†æƒ…ç»ªæˆé•¿è½¬åŒ–ä¸ºå……æ»¡ä¹è¶£çš„å†’é™©ï¼Œäº«å—å¥–åŠ±å’Œæˆå°±</p>
      </div>
      <div class="benefit-card">
        <div class="benefit-icon">ğŸ“ˆ</div>
        <h3>è·Ÿè¸ªæ‚¨çš„è¿›æ­¥</h3>
        <p>é€šè¿‡è¯¦ç»†çš„è¿›åº¦è¿½è¸ªå¯è§†åŒ–æ‚¨çš„æƒ…ç»ªæˆé•¿æ—…ç¨‹</p>
      </div>
      <div class="benefit-card">
        <div class="benefit-icon">ğŸ¤</div>
        <h3>æ”¯æŒæ€§ç¤¾åŒº</h3>
        <p>ä¸ä»–äººå»ºç«‹è”ç³»ï¼Œåˆ†äº«ç±»ä¼¼çš„æƒ…ç»ªå¥åº·æ—…ç¨‹</p>
      </div>
    </div>
  </div>

  <div class="how-it-works">
    <h2 class="section-title">å¦‚ä½•è¿ä½œ</h2>
    <div class="steps-container">
      <div class="step-card">
        <div class="step-number">1</div>
        <div class="step-content">
          <h3>æ£€æŸ¥æ‚¨çš„æƒ…ç»ªå¤©æ°”</h3>
          <p>é€šè¿‡æˆ‘ä»¬ç›´è§‚çš„å¤©æ°”ç³»ç»Ÿå¼€å§‹è¯†åˆ«æ‚¨å½“å‰çš„æƒ…ç»ªçŠ¶æ€</p>
        </div>
      </div>
      <div class="step-card">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3>é€‰æ‹©æ‚¨çš„å²›å±¿</h3>
          <p>è®¿é—®ä¸æ‚¨çš„æƒ…ç»ªéœ€æ±‚ç›¸åŒ¹é…çš„å²›å±¿ - æ— è®ºæ‚¨éœ€è¦å¿«ä¹ã€æ”¾æ¾è¿˜æ˜¯æ”¯æŒ</p>
        </div>
      </div>
      <div class="step-card">
        <div class="step-number">3</div>
        <div class="step-content">
          <h3>å®ŒæˆæŒ‘æˆ˜</h3>
          <p>å‚ä¸æ—¨åœ¨æ”¹å–„æ‚¨æƒ…ç»ªå¥åº·çš„æ²»ç–—æ´»åŠ¨</p>
        </div>
      </div>
    </div>
  </div>

  <div class="faq-section">
    <h2 class="section-title">å¸¸è§é—®é¢˜</h2>
    <div class="faq-container">
      <div class="faq-item">
        <div class="faq-question">ä»€ä¹ˆæ˜¯æƒ…ç»ªæ¢é™©ä¹‹æ—…ï¼Ÿ</div>
        <div class="faq-answer">æƒ…ç»ªæ¢é™©ä¹‹æ—…æ˜¯ä¸€ä¸ªäº’åŠ¨å¼æƒ…ç»ªå¥åº·æ¸¸æˆå¹³å°ï¼Œé€šè¿‡å››ä¸ªç‹¬ç‰¹çš„æƒ…ç»ªå²›å±¿ï¼ˆå¿«ä¹å²›ã€æ”¾æ¾å²›ã€å¿§ä¼¤å²›å’Œç„¦è™‘å²›ï¼‰ï¼Œå¸®åŠ©ç”¨æˆ·æ¢ç´¢ã€ç†è§£å’Œç®¡ç†è‡ªå·±çš„æƒ…ç»ªã€‚æ¯ä¸ªå²›å±¿éƒ½æä¾›ç‰¹å®šçš„æ´»åŠ¨å’Œå·¥å…·æ¥åŸ¹å…»æƒ…ç»ªæ™ºæ…§ã€‚</div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question">æƒ…ç»ªæ¢é™©ä¹‹æ—…é€‚åˆå“ªäº›äººï¼Ÿ</div>
        <div class="faq-answer">è¯¥å¹³å°é€‚åˆæ‰€æœ‰å¸Œæœ›æå‡æƒ…ç»ªç®¡ç†èƒ½åŠ›çš„äººï¼ŒåŒ…æ‹¬ï¼š
          â€¢ æƒ³è¦æ›´å¥½åœ°äº†è§£è‡ªå·±æƒ…ç»ªçš„äºº
          â€¢ æ­£åœ¨ç»å†å‹åŠ›æˆ–ç„¦è™‘çš„äºº
          â€¢ å¯»æ±‚æƒ…ç»ªæ”¯æŒå·¥å…·çš„äºº
          â€¢ å¯¹ä¸ªäººæˆé•¿æ„Ÿå…´è¶£çš„äºº
          â€¢ æƒ³è¦åŸ¹å…»ç§¯æå¿ƒæ€çš„äºº</div>
      </div>

      <div class="faq-item">
        <div class="faq-question">å¦‚ä½•å¼€å§‹æˆ‘çš„æƒ…ç»ªæ¢ç´¢ä¹‹æ—…ï¼Ÿ</div>
        <div class="faq-answer">å¼€å§‹å¾ˆç®€å•ï¼š
          1. ç‚¹å‡»"å¼€å§‹æ¢é™©"æŒ‰é’®
          2. é€‰æ‹©å½“å‰çš„æƒ…ç»ªçŠ¶æ€ï¼ˆæ™´æœ—ã€å¤šäº‘ã€é˜´å¤©æˆ–é£æš´ï¼‰
          3. è¿›å…¥ç›¸åº”çš„æƒ…ç»ªå²›å±¿
          4. å‚ä¸äº’åŠ¨æ´»åŠ¨ï¼Œæ”¶é›†å¾½ç« å’Œå®çŸ³
          æ¯æ¬¡è®¿é—®éƒ½æ˜¯ä¸€æ¬¡ç‹¬ç‰¹çš„æƒ…ç»ªæ¢ç´¢ä½“éªŒã€‚</div>
      </div>

      <div class="faq-item">
        <div class="faq-question">ä½¿ç”¨è¿™ä¸ªå¹³å°æ˜¯å¦éœ€è¦ä¸“ä¸šçš„å¿ƒç†å­¦çŸ¥è¯†ï¼Ÿ</div>
        <div class="faq-answer">ä¸éœ€è¦ã€‚æˆ‘ä»¬çš„å¹³å°è®¾è®¡ç®€å•ç›´è§‚ï¼Œé€‚åˆæ‰€æœ‰ç”¨æˆ·ã€‚æ¯ä¸ªæ´»åŠ¨éƒ½é…æœ‰æ¸…æ™°çš„æŒ‡å¯¼è¯´æ˜ï¼Œè®©æ‚¨èƒ½è½»æ¾å‚ä¸å…¶ä¸­ã€‚è™½ç„¶å¹³å°èå…¥äº†å¿ƒç†å­¦åŸç†ï¼Œä½†ä»¥æ˜“äºç†è§£å’Œå®è·µçš„æ–¹å¼å‘ˆç°ã€‚</div>
      </div>

      <div class="faq-item">
        <div class="faq-question">å¦‚ä½•è¿½è¸ªæˆ‘çš„æƒ…ç»ªæˆé•¿è¿›åº¦ï¼Ÿ</div>
        <div class="faq-answer">å¹³å°æä¾›å¤šç§è¿›åº¦è¿½è¸ªæ–¹å¼ï¼š
          â€¢ æƒ…ç»ªå¾½ç« ç³»ç»Ÿè®°å½•æ‚¨çš„æˆå°±
          â€¢ æ¯ä¸ªå²›å±¿çš„å®Œæˆè¿›åº¦æ¡
          â€¢ æ”¶é›†çš„å®çŸ³æ˜¾ç¤ºæ´»åŠ¨å‚ä¸åº¦
          â€¢ å¿«ä¹å²›çš„å¿ƒæƒ…è®°å½•å¢™
          è¿™äº›éƒ½å¸®åŠ©æ‚¨å¯è§†åŒ–è‡ªå·±çš„æƒ…ç»ªæˆé•¿å†ç¨‹ã€‚</div>
      </div>

      <div class="faq-item">
        <div class="faq-question">å¹³å°çš„å†…å®¹ä¼šå®šæœŸæ›´æ–°å—ï¼Ÿ</div>
        <div class="faq-answer">æ˜¯çš„ã€‚æˆ‘ä»¬å®šæœŸæ›´æ–°å’Œä¼˜åŒ–å¹³å°å†…å®¹ï¼š
          â€¢ æ·»åŠ æ–°çš„äº’åŠ¨æ´»åŠ¨
          â€¢ å¼•å…¥å­£èŠ‚æ€§ä¸»é¢˜
          â€¢ æ ¹æ®ç”¨æˆ·åé¦ˆæ”¹è¿›ç°æœ‰åŠŸèƒ½
          â€¢ å¢åŠ æ–°çš„æƒ…ç»ªç®¡ç†å·¥å…·
          æˆ‘ä»¬è‡´åŠ›äºä¸ºç”¨æˆ·æä¾›ä¸°å¯Œå¤šæ ·çš„æƒ…ç»ªæ¢ç´¢ä½“éªŒã€‚</div>
      </div>

      <div class="faq-item">
        <div class="faq-question">å¦‚ä½•ä¿æŠ¤æˆ‘çš„éšç§ï¼Ÿ</div>
        <div class="faq-answer">æˆ‘ä»¬é«˜åº¦é‡è§†ç”¨æˆ·éšç§ï¼š
          â€¢ æ‰€æœ‰ä¸ªäººæ•°æ®éƒ½ç»è¿‡åŠ å¯†å¤„ç†
          â€¢ æƒ…ç»ªè®°å½•ä»…ä¾›ä¸ªäººæŸ¥çœ‹
          â€¢ ä¸ä¼šä¸ç¬¬ä¸‰æ–¹åˆ†äº«æ‚¨çš„ä¿¡æ¯
          â€¢ æ‚¨å¯ä»¥éšæ—¶åˆ é™¤è‡ªå·±çš„æ•°æ®
          æˆ‘ä»¬æ‰¿è¯ºä¸ºç”¨æˆ·æä¾›å®‰å…¨çš„æƒ…ç»ªæ¢ç´¢ç¯å¢ƒã€‚</div>
      </div>
    </div>
  </div>

  <div class="testimonials">
    <h2 style="color: #fff; margin-bottom: 30px;">æˆ‘ä»¬çš„ç”¨æˆ·æ€ä¹ˆè¯´</h2>
    
    <div class="testimonials-grid">
      <div class="testimonial-card">
        <div class="rating">â­â­â­â­â­</div>
        <p>"è¿™ä¸ªæ¸¸æˆå¸®åŠ©æˆ‘æ›´å¥½åœ°ç†è§£å’Œç®¡ç†æˆ‘çš„æƒ…ç»ªã€‚äº’åŠ¨å²›å±¿æ—¢æœ‰è¶£åˆå…·æœ‰æ²»ç–—æ•ˆæœï¼"</p>
        <small style="color: #aaa;">- Sarah M.</small>
      </div>
      
      <div class="testimonial-card">
        <div class="rating">â­â­â­â­â­</div>
        <p>"ä¸€ç§ç¾ä¸½è€Œå¼•äººå…¥èƒœçš„æ–¹å¼æ¥ç»ƒä¹ æ­£å¿µå’Œæƒ…ç»ªå¥åº·ã€‚å¼ºçƒˆæ¨èï¼"</p>
        <small style="color: #aaa;">- Michael R.</small>
      </div>
    </div>
  </div>

  <div class="future-features">
    <h2 class="section-title">å³å°†æ¨å‡ºçš„åŠŸèƒ½</h2>
    
    <div class="feature-group">
      <div>
        <h3>æ ¸å¿ƒåŠŸèƒ½</h3>
        <div class="feature-list">
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ“Š</div>
            <h4 class="feature-title">æƒ…ç»ªè¿½è¸ª</h4>
            <p class="feature-description">è®°å½•æ‚¨çš„æ„Ÿå—ã€åŸå› ï¼Œæ¢ç´¢éšæ—¶é—´å˜åŒ–çš„æƒ…ç»ªæ¨¡å¼ã€‚é€šè¿‡æ•°æ®å¯è§†åŒ–æ·±å…¥äº†è§£è‡ªå·±çš„æƒ…ç»ªå˜åŒ–ã€‚</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ“ˆ</div>
            <h4 class="feature-title">å‘¨æœˆåº¦å›é¡¾</h4>
            <p class="feature-description">åˆ†ææƒ…ç»ªè¶‹åŠ¿ï¼ŒåŒ…æ‹¬æœ€ä½³å’Œæœ€å·®æƒ…ç»ªæ—¶æ®µã€å¹³å‡æƒ…ç»ªå’Œæƒ…ç»ªæ³¢åŠ¨èŒƒå›´ã€‚è·å–ä¸ªæ€§åŒ–çš„æ”¹å–„å»ºè®®ã€‚</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ§˜</div>
            <h4 class="feature-title">æ´»åŠ¨è®°å½•</h4>
            <p class="feature-description">è¿½è¸ªå†¥æƒ³ã€è·‘æ­¥ã€ä¿¯å§æ’‘ç­‰æ´»åŠ¨ï¼Œå»ºç«‹æƒ…ç»ªä¸æ´»åŠ¨çš„å…³è”åˆ†æï¼Œå‘ç°å¯¹æƒ…ç»ªæœ‰ç§¯æå½±å“çš„ä¹ æƒ¯ã€‚</p>
          </div>
        </div>
      </div>

      <div>
        <h3>ä¸ªæ€§åŒ–ä½“éªŒ</h3>
        <div class="feature-list">
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ¯</div>
            <h4 class="feature-title">æ™ºèƒ½å»ºè®®</h4>
            <p class="feature-description">åŸºäºæ‚¨çš„æƒ…ç»ªæ•°æ®å’Œæ´»åŠ¨è®°å½•ï¼Œæä¾›ä¸ªæ€§åŒ–çš„æ”¹å–„å»ºè®®å’Œæ´»åŠ¨æ¨èã€‚</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon-large">â°</div>
            <h4 class="feature-title">è‡ªå®šä¹‰æé†’</h4>
            <p class="feature-description">è®¾ç½®ä¸ªæ€§åŒ–çš„æƒ…ç»ªè®°å½•æé†’ï¼Œç¡®ä¿æŒç»­è¿½è¸ªã€‚è·å–æ¯å‘¨æƒ…ç»ªæŠ¥å‘Šé‚®ä»¶ï¼Œäº†è§£è‡ªå·±çš„è¿›æ­¥ã€‚</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ¨</div>
            <h4 class="feature-title">ä¸»é¢˜å®šåˆ¶</h4>
            <p class="feature-description">é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ç•Œé¢ä¸»é¢˜å’Œè‰²å½©æ­é…ï¼Œæ‰“é€ ä¸“å±çš„æƒ…ç»ªæ¢ç´¢ç©ºé—´ã€‚</p>
          </div>
        </div>
      </div>

      <div>
        <h3>ç¤¾äº¤åŠŸèƒ½</h3>
        <div class="feature-list">
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ‘¥</div>
            <h4 class="feature-title">æƒ…ç»ªæ”¯æŒåœˆ</h4>
            <p class="feature-description">å»ºç«‹å±äºè‡ªå·±çš„æƒ…ç»ªæ”¯æŒç½‘ç»œï¼Œä¸å¿—åŒé“åˆçš„ä¼™ä¼´ä¸€èµ·æˆé•¿ã€‚å¯ä»¥é€‰æ‹©åˆ†äº«æƒ…ç»ªå†ç¨‹å’Œå¿ƒå¾—ã€‚</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ¤</div>
            <h4 class="feature-title">åŒ¿åäº’åŠ©</h4>
            <p class="feature-description">åœ¨ä¿æŠ¤éšç§çš„å‰æä¸‹ï¼Œå‚ä¸åŒ¿åçš„æƒ…ç»ªäº’åŠ©è®¡åˆ’ï¼Œç»™äºˆå’Œè·å¾—æƒ…æ„Ÿæ”¯æŒã€‚</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon-large">ğŸ</div>
            <h4 class="feature-title">æˆå°±åˆ†äº«</h4>
            <p class="feature-description">å°†è‡ªå·±åœ¨æƒ…ç»ªæ¢ç´¢æ—…ç¨‹ä¸­è·å¾—çš„æˆå°±å’Œå¿ƒå¾—ï¼Œä»¥ä¼˜ç¾çš„å½¢å¼åˆ†äº«ç»™å…³å¿ƒçš„äººã€‚</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="credits">ç”±æƒ…ç»ªæ¸¸æˆå·¥ä½œå®¤åˆ¶ä½œ â¤ï¸</div>
  
  <div class="scroll-down">
    å‘ä¸‹æ»šåŠ¨ä»¥äº†è§£æ›´å¤š â†“
  </div>
</div>

<div class="game-container" style="display: none;">
  <button class="back-button" id="backBtn">è¿”å›</button>
  
  <div class="step-indicator">
    <div class="step-dot active" data-step="1"></div>
    <div class="step-dot" data-step="2"></div>
    <div class="step-dot" data-step="3"></div>
  </div>

  <!-- Step 1: Weather Selection -->
  <div class="step-container active" id="step1">
    <h2 class="step-title">é€‰æ‹©ä»Šå¤©çš„æƒ…ç»ªå¤©æ°”</h2>
    <div class="weather-selector">
      <div class="weather-option" data-island="happy">
        <h2>æ™´æœ— ğŸŒ</h2>
        <p>æ‚¨æ„Ÿåˆ°å¿«ä¹ï¼Œå‰å¾€å¿«ä¹å²›</p>
      </div>
      <div class="weather-option" data-island="relax">
        <h2>å¤šäº‘ â›…</h2>
        <p>æ‚¨éœ€è¦æ”¾æ¾ï¼Œå‰å¾€æ”¾æ¾å²›</p>
      </div>
      <div class="weather-option" data-island="sad">
        <h2>é˜´å¤© ğŸŒ§ï¸</h2>
        <p>æ‚¨æ„Ÿåˆ°éš¾è¿‡ï¼Œå‰å¾€å¿§ä¼¤å²›</p>
      </div>
      <div class="weather-option" data-island="anxiety">
        <h2>é£æš´ ğŸŒªï¸</h2>
        <p>æ‚¨æ„Ÿåˆ°ç„¦è™‘ï¼Œå‰å¾€ç„¦è™‘å²›</p>
      </div>
    </div>
  </div>

  <!-- Step 2: Island Introduction -->
  <div class="step-container" id="step2">
    <h2 class="step-title">æ¬¢è¿æ¥åˆ° <span class="island-name"></span></h2>
    <div class="island-intro">
      <!-- Dynamic content will be inserted here -->
    </div>
  </div>

  <!-- Step 3: Island Activities -->
  <div class="step-container" id="step3">
    <h2 class="step-title"><span class="island-name"></span> æ¢ç´¢</h2>
    <div class="island-content"></div>
  </div>
</div>

<div class="modal" id="question-modal">
  <span class="close-modal">&times;</span>
  <div class="modal-content">
    <h3 id="question-text"></h3>
    <button class="answer-btn" data-answer="A"></button>
    <button class="answer-btn" data-answer="B"></button>
  </div>
</div>

<script>
const sadQuestions = [
  {
    question: "ä»Šå¤©ä½ é”»ç‚¼äº†å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘é”»ç‚¼äº†",
      B: "ä¸ï¼Œæˆ‘æ²¡æœ‰é”»ç‚¼" 
    },
    feedback: {
      A: "å¤ªå¥½äº†ï¼é”»ç‚¼æœ‰åŠ©äºé‡Šæ”¾å‹åŠ›ï¼Œäº§ç”Ÿå¿«ä¹çš„è·å°”è’™",
      B: "è¯•ç€å¼€å§‹ç®€å•çš„æ•£æ­¥ï¼Œé€æ¸å…»æˆé”»ç‚¼çš„ä¹ æƒ¯"
    },
    badge: "ğŸƒ é”»ç‚¼å¤§å¸ˆ"
  },
  {
    question: "ä½ ä»Šå¤©å‡ºé—¨äº†å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘å‘¼å¸äº†æ–°é²œç©ºæ°”",
      B: "ä¸ï¼Œæˆ‘å¾…åœ¨å®¤å†…"
    },
    feedback: {
      A: "æ–°é²œç©ºæ°”å¯ä»¥å¤§å¤§æ”¹å–„æƒ…ç»ªï¼",
      B: "è¯•ç€æ˜å¤©å»æ•£æ­¥ï¼Œæ¢ä¸ªç¯å¢ƒæœ‰åŠ©äºå¿ƒæƒ…"
    },
    badge: "ğŸŒ³ æˆ·å¤–æ¢é™©è€…"
  },
  {
    question: "ä½ ä»Šå¤©å’Œåˆ«äººè¯´è¯äº†å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘å’Œæœ‹å‹/å®¶äººèŠè¿‡",
      B: "ä¸ï¼Œæˆ‘ä¸€ä¸ªäºº"
    },
    feedback: {
      A: "ä¿æŒç¤¾äº¤è”ç³»æ˜¯å¥½çš„ï¼è¿™èƒ½æä¾›æ›´å¤šæ”¯æŒ",
      B: "ç»™ä¸€ä¸ªä½ å…³å¿ƒçš„äººå‘ä¸ªæ¶ˆæ¯ï¼Œæ²Ÿé€šå¸¦æ¥æ¸©æš–"
    },
    badge: "ğŸ—£ï¸ ç¤¾äº¤å¤§å¸ˆ"
  },
  {
    question: "ä½ ä»Šå¤©åƒå¾—å¥½å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘æŒ‰æ—¶åƒäº†å‡è¡¡çš„é¤",
      B: "ä¸ï¼Œæˆ‘åƒå¾—ä¸è§„å¾‹"
    },
    feedback: {
      A: "ç…§é¡¾å¥½ä½ çš„èº«ä½“å¾ˆé‡è¦ï¼ç»§ç»­ä¿æŒï¼",
      B: "ä»ä¸‹ä¸€é¤å¼€å§‹ï¼Œå°è¯•åƒç‚¹å¥åº·çš„ä¸œè¥¿"
    },
    badge: "ğŸ å¥åº·é¥®é£Ÿ"
  },
  {
    question: "ä½ ä»Šå¤©æ§åˆ¶äº†æ‰‹æœºä½¿ç”¨æ—¶é—´å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘æœ‰æ„è¯†åœ°å‡å°‘äº†ä½¿ç”¨",
      B: "ä¸ï¼Œæˆ‘ä¸€ç›´åœ¨ç©æ‰‹æœº"
    },
    feedback: {
      A: "æ§åˆ¶æ‰‹æœºä½¿ç”¨å¯ä»¥å¸®åŠ©ä¿æŒæƒ…ç»ªå¹³é™",
      B: "è¯•ç€ä¸ºä½¿ç”¨è®¾å®šæ—¶é—´é™åˆ¶ï¼Œç»™è‡ªå·±ç•™å‡ºä¸çœ‹å±å¹•çš„æ—¶é—´"
    },
    badge: "ğŸ“± æ•°å­—å¹³è¡¡"
  },
  {
    question: "ä½ ä»Šå¤©åˆ¶å®šäº†è®¡åˆ’å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘åˆ—å‡ºäº†è¦åšçš„äº‹æƒ…",
      B: "ä¸ï¼Œæˆ‘æ„Ÿåˆ°è¿·èŒ«"
    },
    feedback: {
      A: "åˆ¶å®šè®¡åˆ’ä¸ºç”Ÿæ´»æä¾›äº†æ–¹å‘ï¼å¤ªæ£’äº†ï¼",
      B: "ä»æ˜å¤©å¼€å§‹ï¼Œå†™ä¸‹ä¸‰ä»¶å°äº‹å»åš"
    },
    badge: "ğŸ“ è§„åˆ’å¤§å¸ˆ"
  },
  {
    question: "ä½ ä»Šå¤©å–è¶³å¤Ÿçš„æ°´äº†å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘ç¡®ä¿ä¿æŒæ°´åˆ†",
      B: "ä¸ï¼Œæˆ‘å¸¸å¸¸å¿˜è®°å–æ°´"
    },
    feedback: {
      A: "ä¿æŒæ°´åˆ†å¯¹èº«ä½“å’Œå¿ƒç†éƒ½å¾ˆé‡è¦ï¼",
      B: "è®¾ç½®ä¸€ä¸ªå–æ°´æé†’ï¼Œç…§é¡¾å¥½è‡ªå·±å¾ˆé‡è¦"
    },
    badge: "ğŸ’§ æ°´åˆ†å¤§å¸ˆ"
  },
  {
    question: "ä½ ä»Šå¤©ç¡å¾—å¥½å—ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘ç¡å¾—å¾ˆå¥½",
      B: "ä¸ï¼Œæˆ‘çš„ç¡çœ è´¨é‡ä¸å¥½"
    },
    feedback: {
      A: "è‰¯å¥½çš„ç¡çœ æ˜¯è°ƒèŠ‚æƒ…ç»ªçš„å…³é”®ï¼ç»§ç»­ä¿æŒï¼",
      B: "è¯•ç€å½¢æˆè§„å¾‹çš„ç¡çœ ä¹ æƒ¯ï¼Œä»¥æ”¹å–„ç¡çœ è´¨é‡"
    },
    badge: "ğŸ˜´ ç¡çœ å®ˆæŠ¤è€…"
  }
];

const anxietyQuestions = [
  {
    question: "å½“ä½ æ„Ÿåˆ°ç„¦è™‘æ—¶ï¼Œä½ æ˜¯å¦å°è¯•é€šè¿‡æ·±å‘¼å¸å†¥æƒ³æ¥å¹³é™è‡ªå·±ï¼Ÿ",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘ä¼šç”¨å‘¼å¸æ¥å¹³é™è‡ªå·±",
      B: "ä¸ï¼Œæˆ‘é€šå¸¸è®©ç„¦è™‘åŠ å‰§"
    },
    feedback: {
      A: "å¤ªå¥½äº†ï¼æ·±å‘¼å¸æ˜¯ä¸€ç§æœ‰æ•ˆçš„å‡è½»ç„¦è™‘çš„æ–¹æ³•ã€‚ç»§ç»­ç»ƒä¹ ï¼", 
      B: "è¯•è¯•4-7-8çš„å‘¼å¸æŠ€å·§ï¼šå¸æ°”4ç§’ï¼Œå±ä½7ç§’ï¼Œå‘¼æ°”8ç§’ã€‚"
    },
    badge: "ğŸ« å†¥æƒ³å¤§å¸ˆ"
  },
  {
    question: "ä½ èƒ½è¯†åˆ«è‡ªå·±ç„¦è™‘æ—¶çš„èº«ä½“ååº”å—ï¼Ÿï¼ˆä¾‹å¦‚å¿ƒè·³åŠ å¿«ï¼ŒæŒå¿ƒå‡ºæ±—ï¼‰",
    answers: {
      A: "æ˜¯çš„ï¼Œæˆ‘æ³¨æ„åˆ°è¿™äº›èº«ä½“ä¿¡å·",
      B: "ä¸ï¼Œæˆ‘å¾ˆéš¾æ³¨æ„åˆ°è¿™äº›å˜åŒ–"
    },
    feedback: {
      A: "å¾ˆæ£’çš„æ„è¯†ï¼è¯†åˆ«ç„¦è™‘ä¿¡å·æ˜¯é‡è¦çš„ç¬¬ä¸€æ­¥ã€‚",
      B: "è¯•ç€æ›´åŠ å…³æ³¨èº«ä½“æ„Ÿå—ï¼Œä»¥æ›´æ—©åœ°å¯Ÿè§‰å¹¶åº”å¯¹ç„¦è™‘ã€‚"
    },
    badge: "ğŸ§  è§‰å¯Ÿä¸“å®¶"
  },
  {
    question: "å½“ä½ é¢å¯¹ç„¦è™‘æ—¶ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ",
    answers: {
      A: "æˆ‘ä¼šç§¯æå¯»æ‰¾ç¼“è§£ç„¦è™‘çš„æ–¹æ³•",
      B: "æˆ‘é€šå¸¸ä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰å®ƒè¿‡å»"
    },
    feedback: {
      A: "ç§¯æåº”å¯¹æ˜¯ä¸€ç§å¾ˆå¥½çš„æ€åº¦ï¼ç»§ç»­ä¿æŒï¼",
      B: "è€ƒè™‘å­¦ä¹ ä¸€äº›åº”å¯¹ç­–ç•¥ï¼Œæ¯”å¦‚æ­£å¿µç»ƒä¹ æˆ–é”»ç‚¼ã€‚"
    },
    badge: "â­ åº”å¯¹ä¸“å®¶"
  }
];

// Language handling
function getCurrentLanguage() {
  const path = window.location.pathname;
  if (path.startsWith('/zh')) return 'zh';
  if (path.startsWith('/es')) return 'es';
  if (path.startsWith('/fr')) return 'fr';
  if (path.startsWith('/de')) return 'de';
  return 'en';
}

function updateLanguageSelect() {
  const currentLang = getCurrentLanguage();
  const select = document.getElementById('languageSelect');
  if (select) {
    select.value = currentLang;
  }
}

// Modify start button href
document.getElementById('start-game-btn').addEventListener('click', (e) => {
  e.preventDefault();
  const currentLang = getCurrentLanguage();
  const gamePath = currentLang === 'en' ? '/game' : `/${currentLang}/game`;
  window.location.href = gamePath;
});

// Add language change handler
document.getElementById('languageSelect').addEventListener('change', (e) => {
  const newLang = e.target.value;
  const currentPath = window.location.pathname;
  
  let newPath;
  if (currentPath.includes('/game')) {
    // If on game page
    newPath = newLang === 'en' ? '/game' : `/${newLang}/game`;
  } else {
    // If on landing page
    newPath = newLang === 'en' ? '/' : `/${newLang}`;
  }
  
  localStorage.setItem('selectedLanguage', newLang);
  window.location.href = newPath;
});

// On page load
const savedLang = localStorage.getItem('selectedLanguage');
if (savedLang) {
  document.getElementById('languageSelect').value = savedLang;
}

// Call this when page loads
document.addEventListener('DOMContentLoaded', () => {
  updateLanguageSelect();
  
  // Update start button href
  const startButton = document.getElementById('start-game-btn');
  if (startButton) {
    const currentLang = getCurrentLanguage();
    startButton.href = currentLang === 'en' ? '/game' : `/${currentLang}/game`;
  }
  
  // Add click handlers for FAQ items
  document.querySelectorAll('.faq-item').forEach(item => {
    item.addEventListener('click', () => {
      // Check if this item is already active
      const isActive = item.classList.contains('active');
      
      // Close all FAQ items
      document.querySelectorAll('.faq-item').forEach(otherItem => {
        otherItem.classList.remove('active');
      });
      
      // If this item wasn't active before, make it active
      if (!isActive) {
        item.classList.add('active');
      }
    });
  });

  document.querySelector('.scroll-down').addEventListener('click', () => {
    const featureGrid = document.querySelector('.feature-grid');
    featureGrid.scrollIntoView({ behavior: 'smooth' });
  });

  // Add scroll listener to hide/show scroll indicator
  window.addEventListener('scroll', () => {
    const scrollDown = document.querySelector('.scroll-down');
    if (window.scrollY > 100) {
      scrollDown.style.opacity = '0';
      scrollDown.style.pointerEvents = 'none';
    } else {
      scrollDown.style.opacity = '1';
      scrollDown.style.pointerEvents = 'auto';
    }
  });
});

let currentStep = 1;
let selectedIsland = null;
let currentIsland = null;
let collectedGems = {
  sad: [],
  anxiety: []
};

// Function to show intro animation
function showIntroAnimation() {
  const introOverlay = document.createElement('div');
  introOverlay.className = 'intro-overlay';
  
  const content = `
    <h1 class="intro-title">æƒ…ç»ªæ¢é™©ä¹‹æ—…</h1>
    <div class="intro-text">
      æ¬¢è¿æ¥åˆ°è¿™ä¸ªç¥ç§˜è€Œç¾å¦™çš„æƒ…ç»ªä¸–ç•Œï¼è¿™ä¸ªä¸–ç•Œç”±äº”åº§æƒ…ç»ªå²›å±¿ç»„æˆï¼Œæ¯åº§å²›å±¿ä»£è¡¨ç€ä¸åŒçš„æƒ…ç»ªã€‚ä½œä¸ºä¸€åå‹‡æ•¢çš„æ¢é™©è€…ï¼Œä½ å°†ä»ä½ çš„"æƒ…ç»ªå¤©æ°”"å¼€å§‹ä¸€æ®µç‹¬ç‰¹çš„æ—…ç¨‹ã€‚é€šè¿‡ä¸å²›å±¿ä¸Šçš„ä»»åŠ¡å’ŒæŒ‘æˆ˜äº’åŠ¨ï¼Œä½ å°†é‡æ–°å‘ç°æƒ…ç»ªçš„å¹³è¡¡å’ŒåŠ¨åŠ›ã€‚
    </div>
    <div class="emotion-compass">
      <div class="compass-circle"></div>
      <div class="emotion-symbol" style="top: 0; left: 50%; transform: translate(-50%, -50%)">ğŸŒ</div>
      <div class="emotion-symbol" style="top: 50%; right: 0; transform: translate(50%, -50%)">â›…</div>
      <div class="emotion-symbol" style="bottom: 0; left: 50%; transform: translate(-50%, 50%)">ğŸŒ§ï¸</div>
      <div class="emotion-symbol" style="top: 50%; left: 0; transform: translate(-50%, -50%)">ğŸŒªï¸</div>
    </div>
    <button class="start-journey">å¼€å§‹å†’é™©</button>
  `;
  
  introOverlay.innerHTML = content;
  document.body.appendChild(introOverlay);
  
  // Add click handler for start button
  const startButton = introOverlay.querySelector('.start-journey');
  startButton.addEventListener('click', () => {
    introOverlay.style.opacity = '0';
    setTimeout(() => {
      introOverlay.remove();
      document.querySelector('.game-container').style.display = 'block';
    }, 1000);
  });
}

// Initialize landing page
function initializeLandingPage() {
  const emotions = ['ğŸŒ', 'â›…', 'ğŸŒ§ï¸', 'ğŸŒªï¸', 'âœ¨', 'ğŸŒˆ', 'ğŸŒ™', 'â­'];
  
  // Create floating emotion elements
  emotions.forEach((emotion, index) => {
    const emotionEl = document.createElement('div');
    emotionEl.className = 'floating-emotions';
    emotionEl.textContent = emotion;
    emotionEl.style.left = `${Math.random() * 100}vw`;
    emotionEl.style.top = `${Math.random() * 100}vh`;
    emotionEl.style.animationDelay = `${index * 0.5}s`;
    document.querySelector('.landing-page').appendChild(emotionEl);
  });

  // Add start game button handler
  document.getElementById('start-game-btn').addEventListener('click', () => {
    const landingPage = document.getElementById('landing-page');
    landingPage.style.animation = 'fadeOut 1s ease forwards';
    
    setTimeout(() => {
      landingPage.style.display = 'none';
      showIntroAnimation();
    }, 1000);
  });
}

// Modify your existing DOMContentLoaded event listener
document.addEventListener('DOMContentLoaded', () => {
  // Hide game container initially
  document.querySelector('.game-container').style.display = 'none';
  
  // Initialize landing page
  initializeLandingPage();
  
  initializeIslands();
  setupEventListeners();
  // Start with back button hidden
  document.getElementById('backBtn').style.display = 'none';
});

function initializeIslands() {
  // Only create eggs when showing island content
  setupEventListeners();
}

function showIslandContent() {
  if (!selectedIsland) {
    console.error('No island selected');
    return;
  }

  // Clear previous content
  const islandContainer = document.querySelector('.island-content');
  islandContainer.innerHTML = '';

  // Create island specific HTML based on selected island
  let islandHtml = '';
  
  if (selectedIsland === 'sad') {
    islandHtml = `
      <div id="sad-island" style="display: block">
        <div class="progress-bar">
          <div class="progress-fill"></div>  
        </div>
        <div class="badge-collection">
          ${sadQuestions.map((q, i) => `
            <div class="badge" data-badge-index="${i}">
              <span class="badge-icon">${q.badge.split(' ')[0]}</span>
              <span class="badge-name">${q.badge.split(' ')[1]}</span>
            </div>
          `).join('')}
        </div>
        <div id="sad-eggs" class="egg-container"></div>
        <div id="sad-gems" class="gem-collection"></div>
        <div class="completion-reward">
          <h3>æ­å–œä½ å®Œæˆäº†å¿§ä¼¤å²›çš„æ¢ç´¢ï¼ğŸ‰</h3>
          <div class="reward-icon">ğŸ†</div>
          <p>ä½ å­¦ä¼šäº†æ¥å—å’Œç®¡ç†æ‚²ä¼¤çš„æƒ…ç»ª</p>
        </div>
      </div>
    `;
  } else if (selectedIsland === 'anxiety') {
    islandHtml = `
      <div id="anxiety-island" style="display: block">
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
        <div class="badge-collection">
          ${anxietyQuestions.map((q, i) => `
            <div class="badge" data-badge-index="${i}">
              <span class="badge-icon">${q.badge.split(' ')[0]}</span>
              <span class="badge-name">${q.badge.split(' ')[1]}</span>
            </div>
          `).join('')}
        </div>
        <div id="anxiety-eggs" class="egg-container"></div>
        <div id="anxiety-gems" class="gem-collection"></div>
        <div class="completion-reward">
          <h3>æ­å–œä½ å®Œæˆäº†ç„¦è™‘å²›çš„æ¢ç´¢ï¼ğŸ‰</h3>
          <div class="reward-icon">ğŸ†</div>
          <p>ä½ æŒæ¡äº†åº”å¯¹ç„¦è™‘çš„æŠ€å·§</p>
        </div>
      </div>
    `;
  } else if (selectedIsland === 'happy') {
    islandHtml = `
      <div id="happy-island">
        <h2 class="checkin-title">âœ¨ å¿«ä¹è®°å½•å¢™ âœ¨</h2>
        <div class="checkin-wall" id="checkin-wall"></div>
        <button id="checkin-btn" class="answer-btn">ä»Šå¤©ç­¾åˆ°</button>
        <div class="share-message" id="share-message">
          æ„Ÿè°¢æ‚¨åˆ†äº«æ‚¨çš„å¿«ä¹ï¼è®©æˆ‘ä»¬ä¸€èµ·ä¼ æ’­å¿«ä¹ ğŸŒŸ
        </div>
      </div>
    `;
  } else if (selectedIsland === 'relax') {
    islandHtml = `
      <div id="relax-island" style="display: block">
        <h2 class="step-title">æ”¾æ¾æŠ€å·§</h2>
        <div class="piggy-bank">
          <svg viewBox="0 0 100 100">
            <path d="M20,50 C20,30 40,20 50,20 C60,20 80,30 80,50 C80,70 60,80 50,80 C40,80 20,70 20,50" 
                  fill="#FFB6C1" stroke="#FF69B4" stroke-width="2"/>
            <circle cx="40" cy="45" r="3" fill="#000"/>
            <path d="M55,55 Q60,60 65,55" fill="none" stroke="#000" stroke-width="2"/>
            <path d="M75,45 Q80,40 85,45" fill="none" stroke="#FF69B4" stroke-width="3"/>
          </svg>
        </div>
        <div id="relax-tips"></div>
      </div>
    `;
  }

  islandContainer.innerHTML = islandHtml;

  // Now that containers exist, we can create eggs and gems
  if (selectedIsland === 'sad') {
    createEggs('sad-eggs', sadQuestions.length);
    createGems('sad-gems', sadQuestions.length);
    initializeSadIsland();
  } else if (selectedIsland === 'anxiety') {
    createEggs('anxiety-eggs', anxietyQuestions.length);
    createGems('anxiety-gems', anxietyQuestions.length);
    initializeAnxietyIsland();
  } else if (selectedIsland === 'happy') {
    initializeHappyIsland();
  } else if (selectedIsland === 'relax') {
    initializeRelaxIsland();
  }
}

function createEggs(containerId, count) {
  const container = document.getElementById(containerId);
  for (let i = 0; i < count; i++) {
    const egg = document.createElement('div');
    egg.className = 'egg';
    egg.dataset.index = i;
    container.appendChild(egg);
  }
}

function createGems(containerId, count) {
  const container = document.getElementById(containerId);
  for (let i = 0; i < count; i++) {
    const gem = document.createElement('div');
    gem.className = 'gem';
    gem.innerHTML = 'ğŸ’';
    container.appendChild(gem);
  }
}

function setupEventListeners() {
  // Add back button handler
  const backBtn = document.getElementById('backBtn');
  backBtn.addEventListener('click', () => {
    if (currentStep > 1) {
      currentStep--;
      updateStepDisplay();
      backBtn.style.display = currentStep > 1 ? 'block' : 'none';
    }
  });

  // Weather selection handlers
  document.querySelectorAll('.weather-option').forEach(option => {
    option.addEventListener('click', () => {
      selectedIsland = option.dataset.island;
      
      // Highlight selected weather
      document.querySelectorAll('.weather-option').forEach(opt => {
        opt.style.transform = 'scale(1)';
        opt.style.border = '2px solid transparent';
      });
      option.style.transform = 'scale(1.05)';
      option.style.border = '2px solid white';

      // Progress to next step after short delay
      setTimeout(() => {
        currentStep = 2;
        updateStepDisplay();
        document.getElementById('backBtn').style.display = 'block';
      }, 300);
    });
  });

  // Island intro click handler to progress to activities
  document.querySelector('.island-intro').addEventListener('click', () => {
    currentStep = 3;
    updateStepDisplay();
  });

  setupIslandEventListeners();

  document.querySelector('.close-modal').addEventListener('click', closeModal);
}

function setupIslandEventListeners() {
  // Setup specific island features
  switch(selectedIsland) {
    case 'happy':
      initializeHappyIsland();
      break;
    case 'relax':
      initializeRelaxIsland();
      break;
    case 'sad':
      initializeSadIsland();
      break;
    case 'anxiety':
      initializeAnxietyIsland();
      break;
  }
}

function updateStepDisplay() {
  // Update step dots
  document.querySelectorAll('.step-dot').forEach(dot => {
    dot.classList.remove('active');
  });
  const currentDot = document.querySelector(`.step-dot[data-step="${currentStep}"]`);
  if (currentDot) {
    currentDot.classList.add('active');
  }

  // Update step containers
  document.querySelectorAll('.step-container').forEach(container => {
    container.classList.remove('active');
  });
  const currentStepContainer = document.getElementById(`step${currentStep}`);
  if (currentStepContainer) {
    currentStepContainer.classList.add('active');
  }

  // Handle step-specific updates
  if (currentStep === 2) {
    updateIslandIntro();
  } else if (currentStep === 3) {
    showIslandContent();
  }
}

function updateIslandIntro() {
  const introContent = {
    happy: {
      title: "å¿«ä¹å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          è¿™é‡Œå……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ã€‚è®©æˆ‘ä»¬åˆ†äº«å¿«ä¹æ—¶åˆ»ã€‚
        </div>
        <button class="answer-btn" id="start-happy-journey" style="display: block; margin: 20px auto;">
          æ¢ç´¢å¼€å§‹ â˜€ï¸
        </button>
      `,
      icon: "ğŸŒ"
    },
    relax: {
      title: "æ”¾æ¾å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          åœ¨è¿™é‡Œæ”¾ä¸‹çƒ¦æ¼ï¼Œäº«å—å¹³é™ä¸å®‰å®ã€‚
        </div>
        <button class="answer-btn" id="start-relax-journey" style="display: block; margin: 20px auto;">
          æ¢ç´¢å¼€å§‹ ğŸŒº
        </button>
      `,
      icon: "â›…"
    },
    sad: {
      title: "å¿§ä¼¤å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          æˆ‘ä»¬å°†ä¸€èµ·æ¥çº³å’Œç†è§£è¿™äº›æ„Ÿå—ï¼Œæ…¢æ…¢è®©å¿ƒæƒ…è½¬æ™´ã€‚
        </div>
        <button class="answer-btn" id="start-sad-journey" style="display: block; margin: 20px auto;">
          æ¢ç´¢å¼€å§‹ âœ¨
        </button>
      `,
      icon: "ğŸŒ§ï¸"
    },
    anxiety: {
      title: "ç„¦è™‘å²›",
      description: `
        <div style="text-align: center; margin-bottom: 20px;">
          åœ¨è¿™é‡Œæˆ‘ä»¬å°†ä¸€èµ·å­¦ä¹ å¦‚ä½•åº”å¯¹ç„¦è™‘ï¼Œæ‰¾åˆ°å†…å¿ƒçš„å¹³é™ã€‚
          é€šè¿‡ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œæ‚¨å°†æŒæ¡åº”å¯¹ç„¦è™‘çš„å®ç”¨æŠ€å·§ã€‚
        </div>
        <button class="answer-btn" id="start-anxiety-journey" style="display: block; margin: 20px auto;">
          æ¢ç´¢å¼€å§‹ ğŸŒŸ
        </button>
      `,
      icon: "ğŸŒªï¸"
    }
  };

  const intro = introContent[selectedIsland];
  document.querySelectorAll('.island-name').forEach(el => {
    el.textContent = intro.title;
  });
  
  const introHtml = `
    <div class="island-intro-content" style="text-align: center; padding: 40px;">
      <div style="font-size: 64px; margin-bottom: 20px;">${intro.icon}</div>
      <div style="font-size: 18px; line-height: 1.6;">${intro.description}</div>
    </div>
  `;
  
  document.querySelector('.island-intro').innerHTML = introHtml;

  // Add click handlers for all journey buttons
  ['happy', 'relax', 'sad', 'anxiety'].forEach(islandType => {
    const startButton = document.getElementById(`start-${islandType}-journey`);
    if (startButton) {
      startButton.addEventListener('click', () => {
        currentStep = 3;
        updateStepDisplay();
      });
    }
  });
}

function handleEggClick(egg) {
  const index = parseInt(egg.dataset.index);
  const questions = currentIsland === 'sad' ? sadQuestions : anxietyQuestions;
  
  if (collectedGems[currentIsland].includes(index)) {
    return;
  }

  egg.classList.add('cracking');
  createEggParticles(egg);
  
  const reward = document.createElement('div');
  reward.className = 'reward';
  reward.textContent = 'ğŸ';
  egg.appendChild(reward);
  
  setTimeout(() => {
    reward.classList.add('falling');
    egg.classList.add('opened');
    showQuestion(questions[index], index);
  }, 500);
}

function createEggParticles(egg) {
  const particlesContainer = document.createElement('div');
  particlesContainer.className = 'egg-particles';
  
  for (let i = 0; i < 10; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    const angle = (i / 10) * Math.PI * 2;
    const speed = 2 + Math.random() * 2;
    
    particle.style.left = '50%';
    particle.style.top = '50%';
    
    const animation = particle.animate([
      { transform: 'translate(-50%, -50%)' },
      { 
        transform: `translate(${Math.cos(angle) * 50}px, ${Math.sin(angle) * 50}px)`,
        opacity: 0
      }
    ], {
      duration: 1000,
      easing: 'ease-out'
    });
    
    particlesContainer.appendChild(particle);
  }
  
  egg.appendChild(particlesContainer);
  setTimeout(() => particlesContainer.remove(), 1000);
}

function showQuestion(questionData, index) {
  const modal = document.getElementById('question-modal');
  const questionText = document.getElementById('question-text');
  const answerButtons = modal.querySelectorAll('.answer-btn');

  // Make sure buttons are visible for new questions
  answerButtons.forEach(btn => btn.style.display = 'block');

  questionText.textContent = questionData.question;
  answerButtons[0].textContent = questionData.answers.A;
  answerButtons[1].textContent = questionData.answers.B;

  answerButtons.forEach(button => {
    button.onclick = () => handleAnswer(questionData, button.dataset.answer, index);
  });

  modal.style.display = 'block';
}

function handleAnswer(questionData, answer, index) {
  const modal = document.getElementById('question-modal');
  const questionText = document.getElementById('question-text');
  const answerButtons = modal.querySelectorAll('.answer-btn');
  
  answerButtons.forEach(btn => btn.style.display = 'none');
  
  questionText.innerHTML = `
    ${questionData.feedback[answer]}
    <div style="margin-top: 15px; font-size: 1.2em;">
      è·å¾—çš„å¾½ç« ï¼š ${questionData.badge}
    </div>
  `;
  
  // Unlock the corresponding badge
  const badge = document.querySelector(`.badge[data-badge-index="${index}"]`);
  if (badge && !badge.classList.contains('unlocked')) {
    badge.classList.add('unlocked');
  }
  
  if (!collectedGems[currentIsland].includes(index)) {
    collectedGems[currentIsland].push(index);
    updateGems();
    updateProgress();
  }
  
  setTimeout(() => {
    closeModal();
    answerButtons.forEach(btn => btn.style.display = 'block');
  }, 2000);
}

function updateProgress() {
  const islandType = currentIsland;
  const totalQuestions = islandType === 'sad' ? sadQuestions.length : anxietyQuestions.length;
  const progress = (collectedGems[islandType].length / totalQuestions) * 100;
  
  const progressBar = document.querySelector(`#${islandType}-island .progress-fill`);
  progressBar.style.width = `${progress}%`;

  // Only update the achievement for the current answered question
  const lastAnsweredIndex = collectedGems[islandType][collectedGems[islandType].length - 1];
  if (lastAnsweredIndex !== undefined) {
    const questionData = sadQuestions[lastAnsweredIndex];
    if (questionData && questionData.badge) {
      const achievementType = getBadgeType(questionData.badge);
      const achievement = document.querySelector(`.achievement[data-achievement="${achievementType}"]`);
      if (achievement && !achievement.classList.contains('unlocked')) {
        achievement.classList.add('unlocked');
        createCelebration();
      }
    }
  }

  // Check completion
  if (progress === 100) {
    showCompletionReward(islandType);
  }
}

function createCelebration() {
  const celebration = document.createElement('div');
  celebration.className = 'celebration';
  
  for (let i = 0; i < 50; i++) {
    const confetti = document.createElement('div');
    confetti.style.position = 'absolute';
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.top = -20 + 'px';
    confetti.style.transform = 'rotate(' + (Math.random() * 360) + 'deg)';
    confetti.textContent = ['âœ¨', 'ğŸŒŸ', 'ğŸ’«'][Math.floor(Math.random() * 3)];
    
    const animation = confetti.animate([
      { transform: 'translateY(0) rotate(0)', opacity: 1 },
      { transform: `translateY(${window.innerHeight}px) rotate(${360 + Math.random() * 360}deg)`, opacity: 0 }
    ], {
      duration: 1500 + Math.random() * 1000,
      easing: 'ease-out'
    });
    
    celebration.appendChild(confetti);
  }
  
  document.body.appendChild(celebration);
  setTimeout(() => celebration.remove(), 2500);
}

function updateGems() {
  const gems = document.querySelectorAll(`#${currentIsland}-gems .gem`);
  collectedGems[currentIsland].forEach(index => {
    gems[index].classList.add('collected');
  });
  
  // Remove the problematic showCompletionModal call
  if (collectedGems[currentIsland].length === gems.length) {
    setTimeout(() => {
      showCompletionReward(currentIsland);
    }, 1000);
  }
}

// Make sure the showCompletionReward function shows all necessary completion info
function showCompletionReward(islandType) {
  const rewardDiv = document.querySelector(`#${islandType}-island .completion-reward`);
  if (rewardDiv) {
    rewardDiv.style.display = 'block';
    rewardDiv.style.animation = 'fadeIn 0.5s ease';
    
    // Create celebration effects
    createCelebration();
  }
}

function closeModal() {
  document.getElementById('question-modal').style.display = 'none';
}

function initializeHappyIsland() {
  const checkinBtn = document.getElementById('checkin-btn');
  const checkinWall = document.getElementById('checkin-wall');
  const shareMessage = document.getElementById('share-message');

  if (!checkinBtn || !checkinWall || !shareMessage) return;

  checkinBtn.addEventListener('click', () => {
    // Create a new checkin entry with animation
    const entry = document.createElement('div');
    entry.className = 'checkin-entry';
    
    // Get current date and time
    const now = new Date();
    const dateStr = `${now.getMonth() + 1}/${now.getDate()}`;
    const timeStr = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}`;
    
    entry.innerHTML = `
      <span>âœ¨ è®¿å®¢ ${dateStr} ${timeStr}</span>
    `;
    
    checkinWall.appendChild(entry);
    
    // Show share message
    shareMessage.style.display = 'block';
    shareMessage.style.animation = 'fadeIn 0.5s ease';
    
    // Disable checkin button
    checkinBtn.disabled = true;
    checkinBtn.textContent = 'å·²ç­¾åˆ°';
    checkinBtn.style.opacity = '0.7';
  });
}

function initializeRelaxIsland() {
  const relaxTips = document.getElementById('relax-tips');
  if (!relaxTips) return;

  const relaxingTips = [
    "ä»°æœ›å¤©ç©ºï¼Œæ„Ÿå—å®‡å®™èƒ½é‡",
    "åŒè„šè´´åœ°ï¼Œæ±²å–å¤§åœ°åŠ›é‡",
    "æ·±å‘¼å¸ï¼Œè¿æ¥å¤©åœ°ä¹‹æ°”",
    "æ„Ÿå—å†…å¿ƒè·³åŠ¨ï¼Œä¸è‡ªç„¶å…±é¸£",
    "åŒæ‰‹åˆåï¼Œå‡èšå†…åœ¨èƒ½é‡",
    "ä¸æ ‘æœ¨å¯¹è¯ï¼Œå¸æ”¶ç”Ÿå‘½åŠ›",
    "è†å¬æµæ°´å£°ï¼Œå‡€åŒ–å¿ƒçµ",
    "ä½“ä¼šé˜³å…‰æ¸©æš–ï¼Œè¡¥å……èƒ½é‡"
  ];

  // Add click handler for piggy bank
  const piggyBank = document.querySelector('.piggy-bank');
  if (piggyBank) {
    piggyBank.addEventListener('click', () => {
      if (relaxingTips.length > 0) {
        // Get a random tip
        const randomIndex = Math.floor(Math.random() * relaxingTips.length);
        const tip = relaxingTips[randomIndex];
        
        // Create and animate coin/tip coming out of piggy bank
        const coinTip = document.createElement('p');
        coinTip.textContent = tip;
        coinTip.style.position = 'relative';
        coinTip.style.animation = 'messageAppear 0.5s ease';
        
        // Add to tips container
        relaxTips.insertBefore(coinTip, relaxTips.firstChild);
        
        // Animate piggy bank
        piggyBank.style.animation = 'shake 0.5s ease';
        setTimeout(() => {
          piggyBank.style.animation = '';
        }, 500);
      }
    });
  }
}

function initializeAnxietyIsland() {
  currentIsland = 'anxiety';
  
  const eggContainer = document.getElementById('anxiety-eggs');
  if (!eggContainer) return;

  eggContainer.querySelectorAll('.egg').forEach(egg => {
    egg.addEventListener('click', () => handleEggClick(egg));
  });
}

function initializeSadIsland() {
  currentIsland = 'sad';
  
  const eggContainer = document.getElementById('sad-eggs');
  if (!eggContainer) return;

  eggContainer.querySelectorAll('.egg').forEach(egg => {
    egg.addEventListener('click', () => handleEggClick(egg));
  });
}
</script></body></html>
